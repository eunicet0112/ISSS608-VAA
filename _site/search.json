[
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "",
    "text": "This exercise details how to create interactive data visualisation by using functions provided by ggiraph and plotlyr packages."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#learning-outcome",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#learning-outcome",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "",
    "text": "This exercise details how to create interactive data visualisation by using functions provided by ggiraph and plotlyr packages."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#getting-started",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#getting-started",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "2 Getting Started",
    "text": "2 Getting Started\nFirst, write a code chunk to check, install and launch the following R packages:\n\nggiraph for making ‘ggplot’ graphics interactive.\nplotly, R library for plotting interactive statistical graphs.\nDT provides an R interface to the JavaScript library DataTables that create interactive table on html page.\ntidyverse, a family of modern R packages specially designed to support data science, analysis and communication task including creating static statistical graphs.\npatchwork for combining multiple ggplot2 graphs into one figure.\n\nThe code chunk below will be used to accomplish the task.\n\npacman::p_load(ggiraph, plotly, \n               patchwork, DT, tidyverse)"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#importing-data",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#importing-data",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "3 Importing Data",
    "text": "3 Importing Data\nIn this section, Exam_data.csv provided will be used. Using read_csv() of readr package, import Exam_data.csv into R.\nThe code chunk below read_csv() of readr package is used to import Exam_data.csv data file into R and save it as an tibble data frame called exam_data.\n\nexam_data &lt;- read_csv(\"Data/Exam_data.csv\")"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---ggiraph-methods",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---ggiraph-methods",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "4 Interactive Data Visualisation - ggiraph methods",
    "text": "4 Interactive Data Visualisation - ggiraph methods\nggiraph is an htmlwidget and a ggplot2 extension. It allows ggplot graphics to be interactive.\nInteractive is made with ggplot geometries that can understand three arguments:\n\nTooltip: a column of data-sets that contain tooltips to be displayed when the mouse is over elements.\nOnclick: a column of data-sets that contain a JavaScript function to be executed when elements are clicked.\nData_id: a column of data-sets that contain an id to be associated with elements.\n\nIf it used within a shiny application, elements associated with an id (data_id) can be selected and manipulated on client and server sides. Refer to this article for more detail explanation.\n\n4.1 Tooltip effect with tooltip aesthetic\nBelow shows a typical code chunk to plot an interactive statistical graph by using ggiraph package. Notice that the code chunk consists of two parts. First, an ggplot object will be created. Next, girafe() of ggiraph will be used to create an interactive svg object.\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(\n    aes(tooltip = ID),\n    stackgroups = TRUE, \n    binwidth = 1, \n    method = \"histodot\") +\n  scale_y_continuous(NULL, \n                     breaks = NULL)\ngirafe(\n  ggobj = p,\n  width_svg = 6,\n  height_svg = 6*0.618\n)\n\nNotice that two steps are involved. First, an interactive version of ggplot2 geom (i.e. geom_dotplot_interactive()) will be used to create the basic graph. Then, girafe() will be used to generate an svg object to be displayed on an html page.\nBy hovering the mouse pointer on an data point of interest, the student’s ID will be displayed.\n\n\n4.2 Interactivity\n\n4.2.1 Displaying multiple information on tooltip\nThe content of the tooltip can be customised by including a list object as shown in the code chunk below.\n\nexam_data$tooltip &lt;- c(paste0(     \n  \"Name = \", exam_data$ID,         \n  \"\\n Class = \", exam_data$CLASS)) \n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(\n    aes(tooltip = exam_data$tooltip), \n    stackgroups = TRUE,\n    binwidth = 1,\n    method = \"histodot\") +\n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(\n  ggobj = p,\n  width_svg = 8,\n  height_svg = 8*0.618\n)\n\n\n\n\n\nThe first three lines of codes in the code chunk create a new field called tooltip. At the same time, it populates text in ID and CLASS fields into the newly created field. Next, this newly created field is used as tooltip field as shown in the code of line 7.\nBy hovering the mouse pointer on an data point of interest, the student’s ID and Class will be displayed.\n\n\n4.2.2 Customising Tooltip Style\nCode chunk below uses opts_tooltip() of ggiraph to customize tooltip rendering by add css declarations.\n\ntooltip_css &lt;- \"background-color:white; #&lt;&lt;\nfont-style:bold; color:black;\" #&lt;&lt;\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(              \n    aes(tooltip = ID),                   \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") +               \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(                                  \n  ggobj = p,                             \n  width_svg = 6,                         \n  height_svg = 6*0.618,\n  options = list(    #&lt;&lt;\n    opts_tooltip(    #&lt;&lt;\n      css = tooltip_css)) #&lt;&lt;\n)\n\n\n\n\n\nNotice that the background colour of the tooltip is black and the font colour is white and bold.\n\nRefer to Customizing girafe objects to learn more about how to customise ggiraph objects.\n\n\n\n4.2.3 Displaying statistics on tooltip\nCode chunk below shows an advanced way to customise tooltip. In this example, a function is used to compute 90% confident interval of the mean. The derived statistics are then displayed in the tooltip.\n\ntooltip &lt;- function(y, ymax, accuracy = .01) {\n  mean &lt;- scales::number(y, accuracy = accuracy)\n  sem &lt;- scales::number(ymax - y, accuracy = accuracy)\n  paste(\"Mean maths scores:\", mean, \"+/-\", sem)\n}\n\ngg_point &lt;- ggplot(data=exam_data, \n                   aes(x = RACE),\n) +\n  stat_summary(aes(y = MATHS, \n                   tooltip = after_stat(  \n                     tooltip(y, ymax))),  \n    fun.data = \"mean_se\", \n    geom = GeomInteractiveCol,  \n    fill = \"light blue\"\n  ) +\n  stat_summary(aes(y = MATHS),\n    fun.data = mean_se,\n    geom = \"errorbar\", width = 0.2, size = 0.2\n  )\n\ngirafe(ggobj = gg_point,\n       width_svg = 8,\n       height_svg = 8*0.618)\n\n\n\n\n\n\n\n4.2.4 Hover effect with data_id aesthetic\nCode chunk below shows the second interactive feature of ggiraph, namely data_id.\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(           \n    aes(data_id = CLASS),             \n    stackgroups = TRUE,               \n    binwidth = 1,                        \n    method = \"histodot\") +               \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(                                  \n  ggobj = p,                             \n  width_svg = 6,                         \n  height_svg = 6*0.618                      \n)                                        \n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over.\nNote that the default value of the hover css is hover_css = “fill:orange;”.\n\n\n4.2.5 Styling hover effect\nIn the code chunk below, css codes are used to change the highlighting effect.\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(              \n    aes(data_id = CLASS),              \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") +               \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(                                  \n  ggobj = p,                             \n  width_svg = 6,                         \n  height_svg = 6*0.618,\n  options = list(                        \n    opts_hover(css = \"fill: #202020;\"),  \n    opts_hover_inv(css = \"opacity:0.2;\") \n  )                                        \n)                                        \n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over.\nNote: Different from previous example, in this example the ccs customisation request are encoded directly.\n\n\n4.2.6 Combining tooltip and hover effect\nThere are time that we want to combine tooltip and hover effect on the interactive statistical graph as shown in the code chunk below.\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(              \n    aes(tooltip = CLASS, \n        data_id = CLASS),              \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") +               \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(                                  \n  ggobj = p,                             \n  width_svg = 6,                         \n  height_svg = 6*0.618,\n  options = list(                        \n    opts_hover(css = \"fill: #202020;\"),  \n    opts_hover_inv(css = \"opacity:0.2;\") \n  )                                        \n)                                        \n\n\n\n\n\nInteractivity: Elements associated with a data_id (i.e CLASS) will be highlighted upon mouse over. At the same time, the tooltip will show the CLASS.\n\n\n4.2.7 Click effect with onclick\nonclick argument of ggiraph provides hotlink interactivity on the web.\nThe code chunk below shown an example of onclick.\n\nexam_data$onclick &lt;- sprintf(\"window.open(\\\"%s%s\\\")\",\n\"https://www.moe.gov.sg/schoolfinder?journey=Primary%20school\",\nas.character(exam_data$ID))\n\np &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(              \n    aes(onclick = onclick),              \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") +               \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\ngirafe(                                  \n  ggobj = p,                             \n  width_svg = 6,                         \n  height_svg = 6*0.618)                         \n\n\n\n\n\nInteractivity: Web document link with a data object will be displayed on the web browser upon mouse click.\n\n\n\n\n\n\nWarning\n\n\n\nNote that click actions must be a string column in the dataset containing valid javascript instructions.\n\n\n\n\n4.2.8 Coordinated Multiple Views with ggiraph\nIn order to build a coordinated multiple views, the following programming strategy will be used:\n\nAppropriate interactive functions of ggiraph will be used to create the multiple views.\npatchwork function of patchwork package will be used inside girafe function to create the interactive coordinated multiple views.\n\n\np1 &lt;- ggplot(data=exam_data, \n       aes(x = MATHS)) +\n  geom_dotplot_interactive(              \n    aes(data_id = ID),              \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") +  \n  coord_cartesian(xlim=c(0,100)) + \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\n\np2 &lt;- ggplot(data=exam_data, \n       aes(x = ENGLISH)) +\n  geom_dotplot_interactive(              \n    aes(data_id = ID),              \n    stackgroups = TRUE,                  \n    binwidth = 1,                        \n    method = \"histodot\") + \n  coord_cartesian(xlim=c(0,100)) + \n  scale_y_continuous(NULL,               \n                     breaks = NULL)\n\ngirafe(code = print(p1 + p2), \n       width_svg = 6,\n       height_svg = 3,\n       options = list(\n         opts_hover(css = \"fill: #202020;\"),\n         opts_hover_inv(css = \"opacity:0.2;\")\n         )\n       ) \n\n\n\n\n\nNotice that when a data point of one of the dotplot is selected, the corresponding data point ID on the second data visualisation will be highlighted too.\nThe data_id aesthetic is critical to link observations between plots and the tooltip aesthetic is optional but nice to have when mouse over a point."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---plotly-methods",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---plotly-methods",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "5 Interactive Data Visualisation - plotly methods",
    "text": "5 Interactive Data Visualisation - plotly methods\nPlotly’s R graphing library create interactive web graphics from ggplot2 graphs and/or a custom interface to the (MIT-licensed) JavaScript library plotly.js inspired by the grammar of graphics. Different from other plotly platform, plot.R is free and open source.\n\nThere are two ways to create interactive graph by using plotly, they are:\n\nby using plot_ly(), and\nby using ggplotly()\n\n\n5.1 Creating an interactive scatter plot: plot_ly() method\nThe tabset below shows an example a basic interactive plot created by using plot_ly().\n\nPlotCode Chunk\n\n\n\n\nCode\nplot_ly(data = exam_data, \n             x = ~MATHS, \n             y = ~ENGLISH)\n\n\n\n\n\n\n\n\n\nplot_ly(data = exam_data, \n             x = ~MATHS, \n             y = ~ENGLISH)\n\n\n\n\n\n\n5.2 Working with visual variable: plot_ly() method\nIn the code chunk below, color argument is mapped to a qualitative visual variable (i.e. RACE).\n\nPlotCode Chunk\n\n\n\n\nCode\nplot_ly(data = exam_data, \n        x = ~ENGLISH, \n        y = ~MATHS, \n        color = ~RACE)\n\n\n\n\n\n\nInteractive: click on the colour symbol at the legend\n\n\n\nplot_ly(data = exam_data, \n        x = ~ENGLISH, \n        y = ~MATHS, \n        color = ~RACE)\n\n\n\n\n\n\n5.3 Creating an interactive scatter plot: ggplotly() method\nThe code chunk below plots an interactive scatter plot by using ggplotly().\n\nPlotCode Chunk\n\n\n\n\nCode\np &lt;- ggplot(data=exam_data, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nggplotly(p)\n\n\n\n\n\n\n\n\n\np &lt;- ggplot(data=exam_data, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nggplotly(p)\n\nNotice that the only extra line you need to include in the code chunk is ggplotly().\n\n\n\n\n\n5.4 Coordinated Multiple Views with plotly\nThe creation of a coordinated linked plot by using plotly involves three steps:\n\nhighlight_key() of plotly package is used as shared data.\ntwo scatterplots will be created by using ggplot2 functions.\nlastly, subplot() of plotly package is used to place them next to each other side-by-side.\n\n\nPlotCode Chunk\n\n\n\n\nCode\nd &lt;- highlight_key(exam_data)\np1 &lt;- ggplot(data=d, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\np2 &lt;- ggplot(data=d, \n            aes(x = MATHS,\n                y = SCIENCE)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nsubplot(ggplotly(p1),\n        ggplotly(p2))\n\n\n\n\n\n\nClick on a data point of one of the scatterplot and see how the corresponding point on the other scatterplot is selected.\n\n\n\nd &lt;- highlight_key(exam_data)\np1 &lt;- ggplot(data=d, \n            aes(x = MATHS,\n                y = ENGLISH)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\np2 &lt;- ggplot(data=d, \n            aes(x = MATHS,\n                y = SCIENCE)) +\n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\nsubplot(ggplotly(p1),\n        ggplotly(p2))\n\n\n\n\nThing to learn from the code chunk:\n\nhighlight_key() simply creates an object of class crosstalk::SharedData.\nVisit this link to learn more about crosstalk"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---crosstalk-methods",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#interactive-data-visualisation---crosstalk-methods",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "6 Interactive Data Visualisation - crosstalk methods",
    "text": "6 Interactive Data Visualisation - crosstalk methods\nCrosstalk is an add-on to the htmlwidgets package. It extends htmlwidgets with a set of classes, functions, and conventions for implementing cross-widget interactions (currently, linked brushing and filtering).\n\n6.1 Interactive Data Table: DT Package\n\nA wrapper of the JavaScript Library DataTables\nData objects in R can be rendered as HTML tables using the JavaScript library ‘DataTables’ (typically via R Markdown or Shiny).\n\n\nDT::datatable(exam_data, class= \"compact\")\n\n\n\n\n\n\n\n\n6.2 Linked Brushing\n\nPlotCode Chunk\n\n\n\n\nCode\nd &lt;- highlight_key(exam_data) \np &lt;- ggplot(d, \n            aes(ENGLISH, \n                MATHS)) + \n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\ngg &lt;- highlight(ggplotly(p),        \n                \"plotly_selected\")  \n\ncrosstalk::bscols(gg,               \n                  DT::datatable(d), \n                  widths = 5)        \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode chunk below is used to implement the coordinated brushing shown above.\n\nd &lt;- highlight_key(exam_data) \np &lt;- ggplot(d, \n            aes(ENGLISH, \n                MATHS)) + \n  geom_point(size=1) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100))\n\ngg &lt;- highlight(ggplotly(p),        \n                \"plotly_selected\")  \n\ncrosstalk::bscols(gg,               \n                  DT::datatable(d), \n                  widths = 5)        \n\nThings to learn from the code chunk:\n\nhighlight() is a function of plotly package. It sets a variety of options for brushing (i.e., highlighting) multiple plots. These options are primarily designed for linking multiple plotly graphs, and may not behave as expected when linking plotly to another htmlwidget package via crosstalk. In some cases, other htmlwidgets will respect these options, such as persistent selection in leaflet.\nbscols() is a helper function of crosstalk package. It makes it easy to put HTML elements side by side. It can be called directly from the console but is especially designed to work in an R Markdown document. Warning: This will bring in all of Bootstrap!."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#reference",
    "href": "Hands_On_Exercise/Hands_On_Ex03A/Hands_On_Ex03A.html#reference",
    "title": "3 Programming Interactive Data Visualisation with R",
    "section": "7 Reference",
    "text": "7 Reference\n\n7.1 ggigraph\nThis link provides online version of the reference guide and several useful articles. Use this link to download the pdf version of the reference guide.\n\nHow to Plot With Ggiraph\nInteractive map of France with ggiraph\nCustom interactive sunbursts with ggplot in R\nThis link provides code example on how ggiraph is used to interactive graphs for Swiss Olympians - the solo specialists.\n\n\n\n7.2 plotly for R\n\nGetting Started with Plotly in R\nA collection of plotly R graphs are available via this link.\nCarson Sievert (2020) Interactive web-based data visualization with R, plotly, and shiny, Chapman and Hall/CRC is the best resource to learn plotly for R. The online version is available via this link\nPlotly R Figure Reference provides a comprehensive discussion of each visual representations.\nPlotly R Library Fundamentals is a good place to learn the fundamental features of Plotly’s R API.\nGetting Started\nVisit this link for a very interesting implementation of gganimate by your senior.\nBuilding an animation step-by-step with gganimate.\nCreating a composite gif with multiple gganimate panels"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html",
    "title": "Programming Animated Data Graphics with R",
    "section": "",
    "text": "When telling a visually-driven data story, animated graphics tends to attract the interest of the audience and make deeper impression than static graphics. In this hands-on exercise, you will learn how to create animated data visualisation by using gganimate and plotly r packages. At the same time, you will also learn how to (i) reshape data by using tidyr package, and (ii) process, wrangle and transform data by using dplyr package.\n\n\nWhen creating animations, the plot does not actually move. Instead, many individual plots are built and then stitched together as movie frames, just like an old-school flip book or cartoon. Each frame is a different plot when conveying motion, which is built using some relevant subset of the aggregate data. The subset drives the flow of the animation when stitched back together.\n\n\n\n\nBefore we dive into the steps for creating an animated statistical graph, it’s important to understand some of the key concepts and terminology related to this type of visualization.\n\nFrame: In an animated line graph, each frame represents a different point in time or a different category. When the frame changes, the data points on the graph are updated to reflect the new data.\nAnimation Attributes: The animation attributes are the settings that control how the animation behaves. For example, you can specify the duration of each frame, the easing function used to transition between frames, and whether to start the animation from the current frame or from the beginning.\n\n\n\n\n\n\n\nTip\n\n\n\nBefore you start making animated graphs, you should first ask yourself: Does it makes sense to go through the effort? If you are conducting an exploratory data analysis, a animated graphic may not be worth the time investment. However, if you are giving a presentation, a few well-placed animated graphics can help an audience connect with your topic remarkably better than static counterparts."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#overview",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#overview",
    "title": "Programming Animated Data Graphics with R",
    "section": "",
    "text": "When telling a visually-driven data story, animated graphics tends to attract the interest of the audience and make deeper impression than static graphics. In this hands-on exercise, you will learn how to create animated data visualisation by using gganimate and plotly r packages. At the same time, you will also learn how to (i) reshape data by using tidyr package, and (ii) process, wrangle and transform data by using dplyr package.\n\n\nWhen creating animations, the plot does not actually move. Instead, many individual plots are built and then stitched together as movie frames, just like an old-school flip book or cartoon. Each frame is a different plot when conveying motion, which is built using some relevant subset of the aggregate data. The subset drives the flow of the animation when stitched back together.\n\n\n\n\nBefore we dive into the steps for creating an animated statistical graph, it’s important to understand some of the key concepts and terminology related to this type of visualization.\n\nFrame: In an animated line graph, each frame represents a different point in time or a different category. When the frame changes, the data points on the graph are updated to reflect the new data.\nAnimation Attributes: The animation attributes are the settings that control how the animation behaves. For example, you can specify the duration of each frame, the easing function used to transition between frames, and whether to start the animation from the current frame or from the beginning.\n\n\n\n\n\n\n\nTip\n\n\n\nBefore you start making animated graphs, you should first ask yourself: Does it makes sense to go through the effort? If you are conducting an exploratory data analysis, a animated graphic may not be worth the time investment. However, if you are giving a presentation, a few well-placed animated graphics can help an audience connect with your topic remarkably better than static counterparts."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#getting-started",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#getting-started",
    "title": "Programming Animated Data Graphics with R",
    "section": "2 Getting Started",
    "text": "2 Getting Started\n\n2.1 Loading the R Packages\nFirst, write a code chunk to check, install and load the following R packages:\n\nplotly, R library for plotting interactive statistical graphs.\ngganimate, an ggplot extension for creating animated statistical graphs.\ngifski converts video frames to GIF animations using pngquant’s fancy features for efficient cross-frame palettes and temporal dithering. It produces animated GIFs that use thousands of colors per frame.\ngapminder: An excerpt of the data available at Gapminder.org. We just want to use its country_colors scheme.\ntidyverse, a family of modern R packages specially designed to support data science, analysis and communication task including creating static statistical graphs.\n\n\npacman::p_load(readxl, gifski, gapminder,\n               plotly, gganimate, tidyverse)\n\n\n\n2.2 Importing the Data\nIn this hands-on exercise, the Data worksheet from GlobalPopulation Excel workbook will be used.\nWrite a code chunk to import Data worksheet from GlobalPopulation Excel workbook by using appropriate R package from tidyverse family.\n\ncol &lt;- c(\"Country\", \"Continent\")\nglobalPop &lt;- read_xls(\"Data/GlobalPopulation.xls\",\n                      sheet=\"Data\") %&gt;%\n  mutate_each_(funs(factor(.)), col) %&gt;%\n  mutate(Year = as.integer(Year))\n\n\n\n\n\n\n\nLearning Points\n\n\n\n\nread_xls() of readxl package is used to import the Excel worksheet.\nmutate_each_() of dplyr package is used to convert all character data type into factor.\nmutate of dplyr package is used to convert data values of Year field into integer.\n\n\n\nUnfortunately, mutate_each_() was deprecated in dplyr 0.7.0. and funs() was deprecated in dplyr 0.8.0. In view of this, we will re-write the code by using mutate_at() as shown in the code chunk below.\n\ncol &lt;- c(\"Country\", \"Continent\")\nglobalPop &lt;- read_xls(\"Data/GlobalPopulation.xls\",\n                      sheet=\"Data\") %&gt;%\n  mutate_at(col, as.factor) %&gt;%\n  mutate(Year = as.integer(Year))\n\nInstead of using mutate_at(), across() can be used to derive the same outputs.\n\ncol &lt;- c(\"Country\", \"Continent\")\nglobalPop &lt;- read_xls(\"Data/GlobalPopulation.xls\",\n                      sheet=\"Data\") %&gt;%\n  mutate(across(col, as.factor)) %&gt;%\n  mutate(Year = as.integer(Year))"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#animated-data-visualisation-gganimate-methods",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#animated-data-visualisation-gganimate-methods",
    "title": "Programming Animated Data Graphics with R",
    "section": "3 Animated Data Visualisation: gganimate methods",
    "text": "3 Animated Data Visualisation: gganimate methods\ngganimate extends the grammar of graphics as implemented by ggplot2 to include the description of animation. It does this by providing a range of new grammar classes that can be added to the plot object in order to customise how it should change with time.\n\ntransition_*() defines how the data should be spread out and how it relates to itself across time.\nview_*() defines how the positional scales should change along the animation.\nshadow_*() defines how data from other points in time should be presented in the given point in time.\nenter_*()/exit_*() defines how new data should appear and how old data should disappear during the course of the animation.\nease_aes() defines how different aesthetics should be eased during transitions.\n\n\n3.1 Building a static population bubble plot\nIn the code chunk below, the basic ggplot2 functions are used to create a static bubble plot.\n\nggplot(globalPop, aes(x = Old, y = Young, \n                      size = Population, \n                      colour = Country)) +\n  geom_point(alpha = 0.7, \n             show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(title = 'Year: {frame_time}', \n       x = '% Aged', \n       y = '% Young') \n\n\n\n\n\n\n3.2 Building the animated bubble plot\nIn the code chunk below,\n\ntransition_time() of gganimate is used to create transition through distinct states in time (i.e. Year).\nease_aes() is used to control easing of aesthetics. The default is linear. Other methods are: quadratic, cubic, quartic, quintic, sine, circular, exponential, elastic, back, and bounce.\n\n\nggplot(globalPop, aes(x = Old, y = Young, \n                      size = Population, \n                      colour = Country)) +\n  geom_point(alpha = 0.7, \n             show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(title = 'Year: {frame_time}', \n       x = '% Aged', \n       y = '% Young') +\n  transition_time(Year) +       \n  ease_aes('linear')"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#animated-data-visualisation-plotly",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#animated-data-visualisation-plotly",
    "title": "Programming Animated Data Graphics with R",
    "section": "4 Animated Data Visualisation: plotly",
    "text": "4 Animated Data Visualisation: plotly\nIn Plotly R package, both ggplotly() and plot_ly() support key frame animations through the frame argument/aesthetic. They also support an ids argument/aesthetic to ensure smooth transitions between objects with the same id (which helps facilitate object constancy).\n\n4.1 Building an animated bubble plot: ggplotly() method\nIn this sub-section, you will learn how to create an animated bubble plot by using ggplotly() method.\n\nPlotCode Chunk\n\n\n\n\nCode\ngg &lt;- ggplot(globalPop, \n       aes(x = Old, \n           y = Young, \n           size = Population, \n           colour = Country)) +\n  geom_point(aes(size = Population,\n                 frame = Year),\n             alpha = 0.7, \n             show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(x = '% Aged', \n       y = '% Young')\n\nggplotly(gg)\n\n\n\n\n\n\nThe animated bubble plot above includes a play/pause button and a slider component for controlling the animation.\n\n\n\ngg &lt;- ggplot(globalPop, \n       aes(x = Old, \n           y = Young, \n           size = Population, \n           colour = Country)) +\n  geom_point(aes(size = Population,\n                 frame = Year),\n             alpha = 0.7, \n             show.legend = FALSE) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(x = '% Aged', \n       y = '% Young')\n\nggplotly(gg)\n\n\n\n\n\n\n\nLearning Points\n\n\n\n\nAppropriate ggplot2 functions are used to create a static bubble plot. The output is then saved as an R object called gg.\nggplotly() is then used to convert the R graphic object into an animated svg object.\n\n\n\n\n\n\nNotice that although show.legend = FALSE argument was used, the legend still appears on the plot. To overcome this problem, theme(legend.position='none') should be used as shown in the plot and code chunk below.\n\nPlotCode Chunk\n\n\n\n\nCode\ngg &lt;- ggplot(globalPop, \n       aes(x = Old, \n           y = Young, \n           size = Population, \n           colour = Country)) +\n  geom_point(aes(size = Population,\n                 frame = Year),\n             alpha = 0.7) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(x = '% Aged', \n       y = '% Young') + \n  theme(legend.position='none')\n\nggplotly(gg)\n\n\n\n\n\n\n\n\n\ngg &lt;- ggplot(globalPop, \n       aes(x = Old, \n           y = Young, \n           size = Population, \n           colour = Country)) +\n  geom_point(aes(size = Population,\n                 frame = Year),\n             alpha = 0.7) +\n  scale_colour_manual(values = country_colors) +\n  scale_size(range = c(2, 12)) +\n  labs(x = '% Aged', \n       y = '% Young') + \n  theme(legend.position='none')\n\nggplotly(gg)\n\n\n\n\n\n\n4.2 Building an animated bubble plot: plot_ly() method\nIn this sub-section, you will learn how to create an animated bubble plot by using plot_ly() method.\n\nPlotCode Chunk\n\n\n\n\nCode\nbp &lt;- globalPop %&gt;%\n  plot_ly(x = ~Old, \n          y = ~Young, \n          size = ~Population, \n          color = ~Continent,\n          sizes = c(2, 100),\n          frame = ~Year, \n          text = ~Country, \n          hoverinfo = \"text\",\n          type = 'scatter',\n          mode = 'markers'\n          ) %&gt;%\n  layout(showlegend = FALSE)\nbp\n\n\n\n\n\n\n\n\n\nbp &lt;- globalPop %&gt;%\n  plot_ly(x = ~Old, \n          y = ~Young, \n          size = ~Population, \n          color = ~Continent,\n          sizes = c(2, 100),\n          frame = ~Year, \n          text = ~Country, \n          hoverinfo = \"text\",\n          type = 'scatter',\n          mode = 'markers'\n          ) %&gt;%\n  layout(showlegend = FALSE)\nbp"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#reference",
    "href": "Hands_On_Exercise/Hands_On_Ex03B/Hands_OnEx03B.html#reference",
    "title": "Programming Animated Data Graphics with R",
    "section": "5 Reference",
    "text": "5 Reference\n\nGetting Started\nVisit this link for a very interesting implementation of gganimate by your senior.\nBuilding an animation step-by-step with gganimate.\nCreating a composite gif with multiple gganimate panels"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html",
    "href": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html",
    "title": "In-Class Exercise 1: Now You See It!",
    "section": "",
    "text": "In this hands-on exercise, two R packages will be used:\n\ntidyverse\nhaven\n\nThe code chunk used is as follows:\n\npacman::p_load(tidyverse, haven)"
  },
  {
    "objectID": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html#loading-r-packages",
    "href": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html#loading-r-packages",
    "title": "In-Class Exercise 1: Now You See It!",
    "section": "",
    "text": "In this hands-on exercise, two R packages will be used:\n\ntidyverse\nhaven\n\nThe code chunk used is as follows:\n\npacman::p_load(tidyverse, haven)"
  },
  {
    "objectID": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html#importing-pisa-data",
    "href": "In_Class_Exercise/In_Class_Ex01/In_Class_Ex01.html#importing-pisa-data",
    "title": "In-Class Exercise 1: Now You See It!",
    "section": "Importing PISA Data",
    "text": "Importing PISA Data\nThe code chunk below uses read_sas() function of haven to import PISA data into the R environment.\n#| eval: false was used to prevent the code chunk from running.\n\nstu_qqq &lt;- read_sas(\"Data/cy08msp_stu_qqq.sas7bdat\")\n\nThe code chunk below uses the filter() function of dplyr to retrieve records from Singapore (SGP) only.\n\nstu_qqq_SG &lt;- stu_qqq %&gt;% \n  filter(CNT == \"SGP\")\n\nThe code chunks below uses write_rds() and read_rds() to save and read the records from Singapore in R format.\n\nwrite_rds(stu_qqq_SG, \n          \"Data/stu_qqq_SG.rds\")\n\n\nstu_qqq_SG &lt;- read_rds(\"data/stu_qqq_SG.rds\")"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html",
    "href": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html",
    "title": "Be Weatherwise or Otherwise!",
    "section": "",
    "text": "According to the infographic published by the National Climate Change Secretariat (NCCS), the daily mean temperature is projected to increase by 1.4°C to 4.6°C by 2100.\n\n\n\nInfographic on Climate Change in Singapore.\n\n\nIn this exercise, visual interactivity and uncertainty visualisation methods will be employed to validate the claim presented above."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#overview",
    "href": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#overview",
    "title": "Be Weatherwise or Otherwise!",
    "section": "",
    "text": "According to the infographic published by the National Climate Change Secretariat (NCCS), the daily mean temperature is projected to increase by 1.4°C to 4.6°C by 2100.\n\n\n\nInfographic on Climate Change in Singapore.\n\n\nIn this exercise, visual interactivity and uncertainty visualisation methods will be employed to validate the claim presented above."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#preliminary-set-up",
    "href": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#preliminary-set-up",
    "title": "Be Weatherwise or Otherwise!",
    "section": "2. Preliminary Set-Up",
    "text": "2. Preliminary Set-Up\n\n2.1 Loading Relevant R Packages\nThe following code chunk uses the pacman::p_load() function to install and load the relevant R packages:\n\npacman::p_load(ggplot2, dplyr, tidyverse,\n               ggstatsplot, forecast, plotly, hrbrthemes, \n               lubridate)\n\n\n\n2.2 Importing Historical Weather Dataset\nThe historical daily temperature data was downloaded from the Meteorological Service Singapore website.\nFor simplicity, only the daily temperature records for the month of December across the years 1983, 1993, 2003, 2013 and 2023 collected by the weather station in Changi will be analysed.\nA Date column will be added by merging the Day, Month and Year columns and converted to Date format using as.Date() to facilitate subsequent time-series analysis.\n\n\nCode\ndata &lt;- read_csv(\"Data/December.csv\", show_col_types = FALSE)\ndata &lt;- data[,c(\"Year\", \"Month\", \"Day\", \"Mean Temperature (°C)\", \n                \"Maximum Temperature (°C)\", \"Minimum Temperature (°C)\")]\ndata &lt;- data %&gt;% rename(\"Mean Temperature\" = \"Mean Temperature (°C)\", \n                        \"Maximum Temperature\" = \"Maximum Temperature (°C)\", \n                        \"Minimum Temperature\" = \"Minimum Temperature (°C)\")\n\n# Adding date column \ndata$Date &lt;- as.Date(with(data, paste(Year, Month, Day,sep=\"-\")), \"%Y-%m-%d\")\n\n# Adding index column \ndata &lt;- data[with(data, order(Year, Day)), ]\ndata$Index &lt;- seq(from=1, to=nrow(data))\n\nhead(data, 5)\n\n\n# A tibble: 5 × 8\n   Year Month   Day `Mean Temperature` `Maximum Temperature`\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;              &lt;dbl&gt;                 &lt;dbl&gt;\n1  1983    12     1               26.4                  31  \n2  1983    12     2               24.3                  27.2\n3  1983    12     3               25.1                  30.2\n4  1983    12     4               25.2                  30.3\n5  1983    12     5               26                    29.8\n# ℹ 3 more variables: `Minimum Temperature` &lt;dbl&gt;, Date &lt;date&gt;, Index &lt;int&gt;"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#visualisation-of-daily-temperature-patterns",
    "href": "Take_Home_Exercise/Take_Home_Ex03/Take_Home_Ex03.html#visualisation-of-daily-temperature-patterns",
    "title": "Be Weatherwise or Otherwise!",
    "section": "3. Visualisation of Daily Temperature Patterns",
    "text": "3. Visualisation of Daily Temperature Patterns\n\n3.1 Visual Statistical Analysis of Historical Daily Temperature Data\nTo ascertain whether daily temperatures have been displaying an upward trend, a One-Way ANOVA Test will be conducted with the following hypothesis:\nH0: There is no difference in mean daily temperatures across all years.\nH1: The mean daily temperatures for at least one year is different.\n\n\nCode\nggbetweenstats(data = data, \n               x = Year, y = \"Mean Temperature\", \n               type = \"p\",\n               mean.ci = TRUE, \n               pairwise.comparisons = TRUE,\n               pairwise.display = \"s\", \n               p.adjust.method = \"fdr\",\n               messages = FALSE)\n\n\n\n\n\nThe p-value is less than 0.05, indicating that there is sufficient evidence to reject the null hypothesis and conclude that the difference between the mean temperatures for each year is statistically significant. There is an overall increase from 25.41°C in 1983 to 27.30°C in 2023. However, the increase is not consistent across all years as there is is a slight dip from 26.56°C in 2003 to 26.48°C in 2013.\nFrom the statistical test and its visualisation, we are confident that mean daily temperatures displayed an upward trend from 1983 to 2023. With the historical trend in daily temperatures, we will move on to the next section to forecast the upcoming trend in mean daily temperatures till 2100.\n\n\n3.2 Forecasting Daily Temperatures\nTo predict daily temperatures till 2100, linear regression will be used for simplicity. By leveraging historical daily temperature data, the linear regression model is trained to identify trends and patterns in temperature changes over time to provide insights into potential future temperature trends.\nWhile linear regression is rather limited for long-term predictions due to its assumption of a linear relationship, it it inherently simple and offers a straightforward approach to modelling the relationship between variables. Linear regression will be performed using the lm() function from the stats package.\n\nMinimum TemperaturesMean TemperaturesMaximum Temperatures\n\n\n\n# Predicting future minimum temperatures using linear regression\nlm_min &lt;- lm(data$`Minimum Temperature` ~ data$Index)\nsummary(lm_min)\n\n\nCall:\nlm(formula = data$`Minimum Temperature` ~ data$Index)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.3800 -0.3867  0.0589  0.5650  1.4349 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 23.204156   0.127068 182.612  &lt; 2e-16 ***\ndata$Index   0.012395   0.001413   8.772 3.21e-15 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.7872 on 153 degrees of freedom\nMultiple R-squared:  0.3346,    Adjusted R-squared:  0.3303 \nF-statistic: 76.94 on 1 and 153 DF,  p-value: 3.21e-15\n\n\n\n\n\n# Predicting future mean temperatures using linear regression\nlm_mean &lt;- lm(data$`Mean Temperature` ~ data$Index)\nsummary(lm_mean)\n\n\nCall:\nlm(formula = data$`Mean Temperature` ~ data$Index)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.84043 -0.53462  0.05953  0.65061  1.71249 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 25.534512   0.144611 176.574  &lt; 2e-16 ***\ndata$Index   0.011766   0.001608   7.316 1.34e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.8958 on 153 degrees of freedom\nMultiple R-squared:  0.2592,    Adjusted R-squared:  0.2543 \nF-statistic: 53.53 on 1 and 153 DF,  p-value: 1.341e-11\n\n\n\n\n\n# Predicting future maximum temperatures using linear regression\nlm_max &lt;- lm(data$`Maximum Temperature` ~ data$Index)\nsummary(lm_max)\n\n\nCall:\nlm(formula = data$`Maximum Temperature` ~ data$Index)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-5.6310 -0.8814  0.3262  1.2489  3.2547 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 29.103301   0.289307 100.597  &lt; 2e-16 ***\ndata$Index   0.012604   0.003217   3.918 0.000134 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.792 on 153 degrees of freedom\nMultiple R-squared:  0.09117,   Adjusted R-squared:  0.08523 \nF-statistic: 15.35 on 1 and 153 DF,  p-value: 0.0001344\n\n\n\n\n\n\n\n3.3 Interactive Visualisation of Daily Mean Temperature\n\n\nCode for preparing data for visualisation\n# Calculate mean temperature by year\nmean_temp &lt;- data %&gt;% \n  group_by(Year) %&gt;%\n  summarise(mean_temp = mean(`Mean Temperature`)) %&gt;%\n  slice(rep(1:n()))\ndata &lt;- merge(mean_temp, data, by=\"Year\")\n\n# Creating dataframe for mean labels\nmean_label &lt;- data.frame(Day=rep(20, nrow(data)), \n                         `Mean Temperature`=c(25.00, 26.15, 26.20, 26.15, 27.00),\n                         Year=c(1983, 1993, 2003, 2013, 2023), \n                         label=c(\"Mean=25.41°C\", \"Mean=26.52°C\", \"Mean=26.56°C\", \n                                 \"Mean=26.48°C\", \"Mean=27.30°C\"))\n\n# Creating column for projected daily temperatures\ndata$`Projected Mean` &lt;-  0.011766*data$Index + 25.534512\n  \n# Creating dataframe for forecasted mean, minimum and maximum \nprojections &lt;- data.frame(\"Index\" = seq(156, 403)) # To project to 2100\nprojections$Day &lt;- rep(seq(1,31), 8)\nprojections$Month &lt;- 12\nprojections$Year &lt;- rep(c(2033, 2043, 2053, 2063, 2073, 2083, 2093, 2103), each=31)\nprojections$`Projected Minimum` &lt;- 0.012395*(projections$Index) + 23.204156\nprojections$`Projected Mean` &lt;- 0.011766*(projections$Index) + 25.534512\nprojections$`Projected Maximum` &lt;- 0.012604*(projections$Index) + 29.103301\nprojections$Date &lt;- as.Date(with(projections, paste(Year, Month, Day,sep=\"-\")), \"%Y-%m-%d\")\ndata &lt;- bind_rows(data, projections)\n\n# Creating dataframe for annotation\nannotate &lt;- data.frame(value = numeric())\nannotate &lt;- rbind(annotate, \n                  list(value=filter(data, Date == '2103-12-31')$`Projected Minimum`), \n                  list(value=filter(data, Date == '2103-12-31')$`Projected Mean`), \n                  list(value=filter(data, Date == '2103-12-31')$`Projected Maximum`))\nrownames(annotate) &lt;- c(\"Forecasted Minimum Temperature\", \"Forecasted Mean Temperature\", \n                        \"Forecasted Maximum Temperature\")\n\n\nThe interactive plot below has a few notable features:\n\nVisualisation of Uncertainty: The range of possible daily temperatures was plotted as the grey shaded area around the line graph for mean daily temperature. The minimum band represents the lower bound of uncertainty and is indicated by the minimum daily temperatures while the maximum band represents the upper bound of the uncertainty and is indicated by the maximum daily temperatures. By visualising uncertainty this way, viewers can quickly grasp the range of potential daily temperature values to understand the level of confidence or uncertainty associated with the daily temperature data presented.\nMean Temperature Line: The mean daily temperature (horizontal dark blue line) is plotted to show the average Mean Daily Temperature for each year, with the exact average value annotated in dark blue. This allows viewers to accurately identify the mean daily temperatures across all years to understand the overall change in daily temperatures over the years.\nInteractivity: The plot is interactive as it allows viewers to zoom in on specific time periods of interests using the slider at the bottom of the plot.\n\n\n\n\n\n\n\nDesign Considerations\n\n\n\n\nIf the data is plotted as is, there would be large gaps in the line plot due to missing data in the months of January to November. This will compress the actual data points in December, causing the plot to be illegible. To avoid this, an uninterrupted daily temperature history was plotted by hiding missing time periods using the rangebreaks attribute. Other alternatives such as a stacked line plot (one line for each year) were considered but it resulted in a cluttered plot that obscured the overall trend of increasing temperatures over the years.\nThe uncertainty visualisation was represented using the minimum and maximum bands. The fill was set to “tonexty” to create an area plot with interior filling, with the Maximum Daily Temperature and Minimum Daily Temperature being set as the upper and lower bound respectively. To overlay the scatter plot over the uncertainty ribbon, the add_trace() function was used.\nThe line plot has to be inserted after the uncertainty visualisation plot so that it will not be buried under the confidence interval band, thus allowing for clearer visibility.\nThe mean lines for each year have to be plotted individually using add_trace() to ensure that the mean lines are not connected from one year to the next.\nA slider was inserted at the bottom of the plot using rangeslider to allow users to zoom in on specific time periods of interest by adjusting the range on the slider.\nTick labels were set for the x-axis using the ticktext and tickvals argument in the layout attribute to ensure that every start of the year was labelled for increased clarity.\nThe hover information was disabled for the mean lines by setting the hoverinfo='skip'. The hover information was unnecessary since it is a horizontal line and only cluttered the interactivity features.\nThe hover information was customised using the hoverinfo and text arguments.\nAnnotations were added for the forecasted temperature on 31/12/2103 in order to validate the claim mentioned above. Annotations were added using the add_anotations() function.\n\n\n\n\n\nCode for Visualising Historical Daily Temperatures\nfig &lt;- \n  \n  # Setting up uncertainty interval using daily minimum and maximum temperatures\n  plot_ly(data=filter(data, Year &lt;= '2023'), \n          x=~Date, y=~`Minimum Temperature`, \n          type='scatter', mode='lines', \n          # Setting line to transparent\n          line=list(color='rgba(211, 211, 211, 0)')) %&gt;% \n  add_trace(y=~`Maximum Temperature`, \n            type='scatter', mode='lines', \n            line=list(color='rgba(211, 211, 211, 0)'),\n            # Setting fill to opacity of 0.3\n            fill='tonexty', fillcolor='rgba(211, 211, 211, 0.3)') %&gt;% \n  \n  # Setting up line plot for historical daily mean temperature\n  add_trace(x=~Date, y=~`Mean Temperature`, \n            type='scatter', mode='lines+markers', \n            marker=list(color=\"#88CDF6\", size=5), \n            line=list(color=\"#88CDF6\", width=1.5),\n            hoverinfo='text', \n            text= ~paste('&lt;/br&gt; Date: ', Date,\n                         '&lt;/br&gt; Mean Temperature: ', `Mean Temperature`, \"°C\")) \n\n\nfig &lt;- fig %&gt;%\n  # Setting up mean line\n  add_trace(data=filter(data, Year == '1983'),\n          x=~Date, y=~mean_temp, \n          type='scatter', mode='lines', \n          line=list(color='#015C92', width=1.5),\n          # Disabling hover information\n          hoverinfo='skip') %&gt;% \n  \n  # Adding annotation for mean line \n  layout(annotations=list(x=\"1983-12-20\", y=25.00, text=\"Mean=25.41°C\", showarrow=FALSE, \n                           font=list(color=\"#015C92\", size=9))) %&gt;% \n  \n  add_trace(data=filter(data, Year == '1993'),\n          x=~Date, y=~mean_temp, \n          type='scatter', mode='lines', \n          line=list(color='#015C92', width=1.5), \n          hoverinfo='skip') %&gt;% \n  layout(annotations=list(x=\"1993-12-20\", y=26.15, text=\"Mean=26.52°C\", showarrow=FALSE, \n                           font=list(color=\"#015C92\", size=9))) %&gt;% \n  \n  add_trace(data=filter(data, Year == '2003'),\n          x=~Date, y=~mean_temp, \n          type='scatter', mode='lines', \n          line=list(color='#015C92', width=1.5), \n          hoverinfo='skip') %&gt;% \n  layout(annotations=list(x=\"2003-12-20\", y=26.20, text=\"Mean=26.56°C\", showarrow=FALSE, \n                           font=list(color=\"#015C92\", size=9))) %&gt;% \n  \n  add_trace(data=filter(data, Year == '2013'),\n          x=~Date, y=~mean_temp, \n          type='scatter', mode='lines', \n          line=list(color='#015C92', width=1.5), \n          hoverinfo='skip') %&gt;% \n  layout(annotations=list(x=\"2013-12-20\", y=26.15, text=\"Mean=26.48°C\", showarrow=FALSE, \n                           font=list(color=\"#015C92\", size=9))) %&gt;% \n  \n  add_trace(data=filter(data, Year == '2023'),\n          x=~Date, y=~mean_temp, \n          type='scatter', mode='lines', \n          line=list(color='#015C92', width=1.5), \n          hoverinfo='skip') %&gt;% \n  layout(annotations=list(x=\"2023-12-20\", y=27.00, text=\"Mean=27.30°C\", showarrow=FALSE, \n                           font=list(color=\"#015C92\", size=9))) \n\n\n\n\nCode for Visualising Forecasted Daily Temperatures\nfig &lt;- fig %&gt;% \n  \n  # Setting up linear regression line\n  add_trace(data=filter(data, Year &gt;= '2033'), \n            x=~Date, y=~`Projected Mean`, \n            type='scatter', mode='lines', \n            line=list(color='#8F0000', width=1.5), \n            # Formatting hover text information\n            hoverinfo='text', \n            text = ~paste('&lt;/br&gt; Date: ', Date,\n                          '&lt;/br&gt; Forecasted Mean Temperature', format(round(`Projected Mean`,2)), '°C')) %&gt;% \n  \n  # Setting up uncertainty interval using forecasted minimum and maximum temperatures\n  add_trace(data=filter(data, Year &gt;= '2033'), \n            x=~Date, y=~`Projected Minimum`, \n            type='scatter', mode='lines', \n            line=list(color='rgba(241, 169, 160, 0'),\n            hoverinfo='text', \n            text = ~paste('&lt;/br&gt; Date: ', Date,\n                          '&lt;/br&gt; Forecasted Minimum Temperature', format(round(`Projected Minimum`,2)), '°C')) %&gt;% \n  add_trace(y=~`Projected Maximum`, \n            type='scatter', mode='lines', \n            line=list(color='rgba(241, 169, 160, 0)'), \n            fill='tonexty', fillcolor='rgba(241, 169, 160, 0.3)', \n            hoverinfo='text', \n            text = ~paste('&lt;/br&gt; Date: ', Date,\n                          '&lt;/br&gt; Forecasted Maximum Temperature', format(round(`Projected Maximum`,2)), '°C'))\n\n\n\n\nCode for Formatting Layout of Visualisation\nfig %&gt;% \n  layout(showlegend=FALSE, # Switching off legend\n         xaxis=list(\n           # Specifying range of dates for plot\n           range=c(\"1983-12-01\", \"2103-12-31\"), \n                    # Hiding time periods with missing data\n                    rangebreaks=list(\n                      list(bounds=list(\"1984-01-01\", \"1993-12-01\")), \n                      list(bounds=list(\"1994-01-01\", \"2003-12-01\")), \n                      list(bounds=list(\"2004-01-01\", \"2013-12-01\")), \n                      list(bounds=list(\"2014-01-01\", \"2023-12-01\")), \n                      list(bounds=list(\"2024-01-01\", \"2033-12-01\")),\n                      list(bounds=list(\"2034-01-01\", \"2043-12-01\")),\n                      list(bounds=list(\"2044-01-01\", \"2053-12-01\")),\n                      list(bounds=list(\"2054-01-01\", \"2063-12-01\")),\n                      list(bounds=list(\"2064-01-01\", \"2073-12-01\")),\n                      list(bounds=list(\"2074-01-01\", \"2083-12-01\")),\n                      list(bounds=list(\"2084-01-01\", \"2093-12-01\")),\n                      list(bounds=list(\"2094-01-01\", \"2103-12-01\"))),  \n                    \n                    # Inserting range slider for time period selection\n                    rangeslider=list(type=Date,\n                                     range=c(\"1983-12-01\", \"2103-12-31\")),\n           \n           # Specifying tick labels\n           ticktext=list(\"1983\", \"1993\", \"2003\", \"2013\", \"2023\", \"2033\", \"2043\", \n                         \"2053\", \"2063\", \"2073\", \"2083\", \"2093\", \"2103\"), \n           tickvals=list(\"1983-12-01\", \"1993-12-01\", \"2003-12-01\", \"2013-12-01\", \n                       \"2023-12-01\", \"2033-12-01\", \"2043-12-01\", \"2053-12-01\", \n                       \"2063-12-01\", \"2073-12-01\", \"2083-12-01\", \"2093-12-01\", \"2103-12-01\"),\n           \n           # Labelling x-axis\n           title=\"Date\"), \n         # Labelling y-axis\n         yaxis=list(title=\"Daily Temperature (°C)\"), \n         # Labelling plot\n         title=\"Daily temperatures for December in Changi are expected to \\nincrease through to 2100\") %&gt;% \n  \n  add_annotations(x=\"2103-12-31\", y=annotate$value, \n                  text= ~paste(rownames(annotate), \": \", format(round(annotate$value,2)), \"°C\", sep=\"\"),\n                  xref=\"x\", yref=\"y\", \n                  xanchor=\"right\", ay=c(10, -10, 10),\n                  showarrow=TRUE, arrowhead=4, arrowsize=0.5, arrowcolor=\"#8F0000\",\n                  font = list(size=10, color=\"#8F0000\"))\n\n\n\n\n\n\nFrom the visualisation, the following can be inferred:\n\nSeasonality in daily mean temperatures was observed across all years from 1983 to 2023.\nDaily mean temperatures displayed an overall increase from 25.41°C in 1983 to 27.30°C in 2023.\nBased on forecasts from the linear regression model, daily minimum, mean and maximum temperatures are expected to reach 28.20°C, 30.28°C and 34.18°C by 31 December 2103. The claim of “daily mean temperature is projected to increase by 1.4°C to 4.6°C by 2100” is thus supported. Daily mean temperatures are projected to increase from 27.30°C in 2023 to 30.28°C in 2103. The 2.98°C increase thus falls within the range projected by NCCS and supports its claim. If the upper band of the projection is used, daily temperature is projected to increase from 27.30°C in 2023 to 34.18°C in 2103. The 6.88°C increase falls outside the range projected by NCCS and paints a grimmer image for climate change in Singapore."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html",
    "title": "Is Every School a Good School?",
    "section": "",
    "text": "Is every school a good school? According to OECD education director Andreas Schleicher, Singapore “managed to achieve excellence without wide differences between children from wealthy and disadvantaged families”. This spells good news for Singapore as its education system strives towards every school being a good school. Yet, public sentiments differs starkly from this. There is a strong belief that disparities continue to exist between elite and neighbourhood schools, between students from higher and lower socioeconomic status, and between students from immigrant and non-immigrant families.\nIn this short exercise, we will study the 2022 Programme for International Student Assessment (PISA) data to reveal the following:\n\nthe distribution of Singapore students’ performance in Mathematics, Reading and Science; and\nthe relationship between the aforementioned performances with schools, gender and socioeconomic status of the students."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#loading-relevant-r-packages",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#loading-relevant-r-packages",
    "title": "Is Every School a Good School?",
    "section": "2.1 Loading Relevant R Packages",
    "text": "2.1 Loading Relevant R Packages\nThe following code chunk uses the pacman::p_load() function to install and load the relevant R packages:\n\npacman::p_load(haven, tidyverse, ggplot2, e1071, dplyr, \n               forcats, rstatix,kableExtra, ggstatsplot, \n               hrbrthemes, tidyr, viridis, ggridges, nortest,\n               tm, proustr, VennDiagram)"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#importing-pisa-dataset",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#importing-pisa-dataset",
    "title": "Is Every School a Good School?",
    "section": "2.2 Importing PISA Dataset",
    "text": "2.2 Importing PISA Dataset\nThe dataset provided for this exercise is extremely large with over 600,000 records from students globally. For the purpose of our task, we will filter the dataset to only include records of students from Singapore (with country code “SGP”). The resultant dataset stu_sg has 6606 records.\nThe data dictionary of all 1279 variables can be found in the PISA 2022 Database Codebook.\n\n\nCode\nstu_qqq &lt;- read_sas(\"Data/cy08msp_stu_qqq.sas7bdat\")\nstu_sg &lt;- stu_qqq %&gt;% filter(CNT == \"SGP\")\nwrite_rds(stu_sg, \"Data/stu_SG.rds\")\n\n\n\nstu_sg &lt;- read_rds(\"data/stu_sg.rds\")"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-mathematics",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-mathematics",
    "title": "Is Every School a Good School?",
    "section": "3.1 Distribution of Performance in Mathematics",
    "text": "3.1 Distribution of Performance in Mathematics\nThe code chunk below defines the performance bands based on the lower and upper bound for scores as stipulated by PISA.\n\nrects_math &lt;- data.frame(ystart = c(46, 420.07, 482.38, 544.68, 606.99, 669.30), \n                    yend = c(420.07, 482.38, 544.68, 606.99, 669.30, 950),\n                    Levels = c(\"Level 1\", \"Level 2\", \"Level 3\", \"Level 4\", \"Level 5\", \"Level 6\"))\n\n\n\n\n\n\n\nDesign Considerations for Violin Plot\n\n\n\n\nPlotting of the performance bands using geom_rect() has to precede all other plots to ensure that it is set as the background of the plot.\nBy default, geom_violin() sets trim=TRUE and the tails of the violins are trimmed. It was thus set to FALSE to ensure the entire range of performance scores is included in the plot.\nThe five-number summary statistics (minimum, first quartile, median, third quartile and maximum in black font) and the mean (in blue font) are displayed on the plot for greater clarity.\n\n\n\n\n\nCode\nggplot(data=stu_sg, aes(x=CNTRYID, y=as.numeric(PV5MATH))) + \n  \n  # Adding background rectangle shading to mark out performance bands\n  geom_rect(data=rects_math,\n            aes(ymin=as.numeric(ystart), ymax=as.numeric(yend), xmin=-Inf, xmax=Inf, fill=Levels),\n            inherit.aes=FALSE, alpha=0.15) +\n  \n  \n  # Adding axis labels, title and subtitle\n  labs(x=\"\", y=\"PV5 Scores for Mathematics\",\n       title=\"Mathematics Scores of Students\", \n       subtitle=\"\\n Mean score labelled in blue. Minimum, quantiles and maximum labelled in black.\") +\n  \n  # Adding violin plot\n  geom_violin(trim=FALSE, color=\"red\", alpha=0) + \n  \n  # Adding boxplot\n  geom_boxplot(width=0.1, color=\"black\", alpha=0) + \n  \n  # Adding summary statistic annotations\n  stat_summary(geom=\"text\", fun.y=quantile, \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.15), size=3) +\n  \n  # Adding mean annotation\n  stat_summary(geom=\"point\", fun.y=\"mean\", color=\"blue\", fill=\"blue\", size=2, shape=21) +\n  stat_summary(geom=\"text\", fun.y=\"mean\", color=\"blue\", \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.09), size=3) + \n\n  # Setting x-axis limits as CNTRYID was used as x-variable arbitrarily - all records have CTRYID of 702\n  scale_x_continuous(limits=c(701.5, 702.5)) +\n  \n  coord_flip() + \n  theme(axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank())\n\n\n\n\n\n\n\n\n\n\n\nInsights on Mathematics Performance\n\n\n\n\nThe mean score for Mathematics is 573.4 while the median score is 580.0. Both scores fall within Level 4 on the Proficiency Scale, indicating that the average student in Singapore are moderately proficient in Mathematics.\nThe distribution displays a slight left skew (skewness = -0.246 using skewness()). With the peak or mode of the distribution lying towards the right, there is a larger number of students with performance scores that are closer to the higher end.\nThe lower bound of Level 5 proficiency of 606.99 lies between the median (580.0) and the upper quartile (647.3). This indicates that a rather substantial portion (albeit less than 50%) of students are top performers in Mathematics."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-science",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-science",
    "title": "Is Every School a Good School?",
    "section": "3.2 Distribution of Performance in Science",
    "text": "3.2 Distribution of Performance in Science\nUsing the same approach as Section 3.1, the violin plot was generated for Science scores.\n\n\nCode\nrects_sci &lt;- data.frame(ystart = c(39, 409.54, 484.14, 558.73, 633.33, 707.93), \n                    yend = c(409.54, 484.14, 558.73, 633.33, 707.93, 924),\n                    Levels = c(\"Level 1\", \"Level 2\", \"Level 3\", \"Level 4\", \"Level 5\", \"Level 6\"))\n\nggplot(data=stu_sg, aes(x=CNTRYID, y=as.numeric(PV5SCIE))) + \n  \n  # Adding background rectangle shading to mark out performance bands\n  geom_rect(data=rects_sci,\n            aes(ymin=as.numeric(ystart), ymax=as.numeric(yend), xmin=-Inf, xmax=Inf, fill=Levels),\n            inherit.aes=FALSE, alpha=0.15) +\n  \n  \n  # Adding axis labels, title and subtitle\n  labs(x=\"\", y=\"PV5 Scores for Science\",\n       title=\"Science Scores of Students\", \n       subtitle=\"\\n Mean score labelled in blue. Minimum, quantiles and maximum labelled in black.\") +\n  \n  # Adding violin plot\n  geom_violin(trim=FALSE, color=\"red\", alpha=0) + \n  \n  # Adding boxplot\n  geom_boxplot(width=0.1, color=\"black\", alpha=0) + \n  \n  # Adding summary statistic annotations\n  stat_summary(geom=\"text\", fun.y=quantile, \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.15), size=3) +\n  \n  # Adding mean annotation\n  stat_summary(geom=\"point\", fun.y=\"mean\", color=\"blue\", fill=\"blue\", size=2, shape=21) +\n  stat_summary(geom=\"text\", fun.y=\"mean\", color=\"blue\", \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.09), size=3) + \n\n  # Setting x-axis limits as CNTRYID was used as x-variable arbitrarily - all records have CTRYID of 702\n  scale_x_continuous(limits=c(701.5, 702.5)) +\n  \n  coord_flip() + \n  theme(axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank())\n\n\n\n\n\n\n\n\n\n\n\nInsights on Science Performance\n\n\n\n\nThe mean score for Science is 561.5 while the median score is 569.7. Both scores fall within Level 4 on the Proficiency Scale, indicating that the average student in Singapore are moderately proficient in Science.\nThe distribution displays a slight left skew (skewness = -0.297 using skewness()). With the peak or mode of the distribution lying towards the right, there is a larger number of students with performance scores that are closer to the higher end.\nAround 25% of students attained scores more than or equal to 632.1. With the score point range starting from 633.33 for Level 5, slightly less than 25% of Singapore students are top performers in Science."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-reading",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#distribution-of-performance-in-reading",
    "title": "Is Every School a Good School?",
    "section": "3.3 Distribution of Performance in Reading",
    "text": "3.3 Distribution of Performance in Reading\nUsing the same approach as Section 3.1, the violin plot was generated for Reading scores.\n\n\nCode\nrects_read &lt;- data.frame(ystart = c(0, 407.47, 480.18, 552.89, 625.61, 698.32), \n                    yend = c(407.47, 480.18, 552.89, 625.61, 698.32, 938),\n                    Levels = c(\"Level 1\", \"Level 2\", \"Level 3\", \"Level 4\", \"Level 5\", \"Level 6\"))\n\nggplot(data=stu_sg, aes(x=CNTRYID, y=as.numeric(PV5READ))) + \n  \n  # Adding background rectangle shading to mark out performance bands\n  geom_rect(data=rects_sci,\n            aes(ymin=as.numeric(ystart), ymax=as.numeric(yend), xmin=-Inf, xmax=Inf, fill=Levels),\n            inherit.aes=FALSE, alpha=0.15) +\n  \n  \n  # Adding axis labels, title and subtitle\n  labs(x=\"\", y=\"PV5 Scores for Reading\",\n       title=\"Science Scores of Reading\", \n       subtitle=\"\\n Mean score labelled in blue. Minimum, quantiles and maximum labelled in black.\") +\n  \n  # Adding violin plot\n  geom_violin(trim=FALSE, color=\"red\", alpha=0) + \n  \n  # Adding boxplot\n  geom_boxplot(width=0.1, color=\"black\", alpha=0) + \n  \n  # Adding summary statistic annotations\n  stat_summary(geom=\"text\", fun.y=quantile, \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.15), size=3) +\n  \n  # Adding mean annotation\n  stat_summary(geom=\"point\", fun.y=\"mean\", color=\"blue\", fill=\"blue\", size=2, shape=21) +\n  stat_summary(geom=\"text\", fun.y=\"mean\", color=\"blue\", \n               aes(label=sprintf(\"%1.1f\", ..y..)),\n               position=position_nudge(x=0.09), size=3) + \n\n  # Setting x-axis limits as CNTRYID was used as x-variable arbitrarily - all records have CTRYID of 702\n  scale_x_continuous(limits=c(701.5, 702.5)) +\n  \n  coord_flip() + \n  theme(axis.title.y=element_blank(), axis.text.y=element_blank(), axis.ticks.y=element_blank())\n\n\n\n\n\n\n\n\n\n\n\nInsights on Reading Performance\n\n\n\n\nThe mean score for Reading is 541.9 while the median score is 551.2. Both scores fall within Level 3 on the Proficiency Scale, indicating that an average student in Singapore are moderately proficient in Reading. However, students recorded an average of Level 4 in Mathematics and Science, thus indicating that students in Singapore may be more proficient in Mathematics and Science compared to Reading\nThe distribution displays a slight left skew (skewness = -0.366 using skewness()). With the peak or mode of the distribution lying towards the right, there is a larger number of students with performance scores that are closer to the higher end.\nAround 25% of students attained scores more than or equal to 617.1. With the score point range starting from 625.61 for Level 5, slightly less than 25% of Singapore students are top performers in Reading."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-performance-and-schools",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-performance-and-schools",
    "title": "Is Every School a Good School?",
    "section": "4.1 Relationship between Performance and Schools",
    "text": "4.1 Relationship between Performance and Schools\nThe Ministry of Education (MOE) in Singapore grouped schools into nine bands with each band comprising schools with similar academic performance. The top 50 Special/Express and top 40 Normal course ranking tables were published to rank schools’ academic performances. While the school banding by academic results was abolished in 2012, informal school rankings developed by parents or interested parties continue to exist to this day. This highlights a common sentiments among parents and students - not all schools are equal and some are better than others.\nIn this section, we explore the relationship between schools and the performance of its students. Specifically, we ask if the choice of school affects the performance of students in terms of their performance in Mathematics, Science and Reading.\n\n4.1.1 Grouping Schools for Meaningful Analysis\nIn the PISA database, the schools of individual students are recorded as 8-character code CNTSCHID. There are 164 unique CNTSCHID in our stu_sg database. Such large number of school categories will clutter our visualisations and make subsequent analysis unmeaningful. For increased clarity, we will reduce the number of school categories by grouping the schools into 4 groups - Groups 1 to 4. For each subject, Group 1 will consist of schools with the lowest scores, followed by Group 2 then Group 3, with Group 4 consisting of schools with the highest scores.\n\n\n\n\n\n\nProcess for Grouping Schools\n\n\n\n\nThe group_by() function from the dplyr package was used to group the dataframe using the CNTSCHID column then finding the mean of the Plausible Value 5 (PV5) scores for each group\nThe resultant dataframe (consisting of School ID and corresponding mean PV5 scores) was sorted based on the mean PV5 scores in ascending order using the order() function.\nThe ordered list for schools is split into four equal groups, with Group 1 consisting of schools with the lowest scores and Group 4 consisting of schools with the highest scores.\n\n\n\nGroup\nRanked (in ascending order) Data Points\n\n\n\n\n1\n1 - 41\n\n\n2\n42 - 82\n\n\n3\n83 - 123\n\n\n4\n124 - 164\n\n\n\nThe schools are labelled based on the group they belong to, namely Group 1, Group 2, Group 3 and Group 4, in a new column called group.\n\n\n\n\n\nCode Block for Grouping Schools for Mathematics\n# Group based on School ID then find mean PV5 score\nmath_sch &lt;- stu_sg %&gt;%\n  group_by(CNTSCHID) %&gt;%\n  summarise(mean = mean(PV5MATH))\n\n# Sort based on mean PV5 score\nmath_sch &lt;- math_sch[order(math_sch$mean), ]\n\n# Label where school lies\nmath_sch$group &lt;- c(rep(\"Group 1\", 41), rep(\"Group 2\", 41), rep(\"Group 3\", 41), rep(\"Group 4\", 41))\n\n\n\n\nCode Block for Grouping Schools for Science\n# Group based on School ID then find mean PV5 score\nsci_sch &lt;- stu_sg %&gt;%\n  group_by(CNTSCHID) %&gt;%\n  summarise(mean = mean(PV5SCIE))\n\n# Sort based on mean PV5 score\nsci_sch &lt;- sci_sch[order(sci_sch$mean), ]\n\n# Label where school lies\nsci_sch$group &lt;- c(rep(\"Group 1\", 41), rep(\"Group 2\", 41), rep(\"Group 3\", 41), rep(\"Group 4\", 41))\n\n\n\n\nCode Block for Grouping Schools for Reading\n# Group based on School ID then find mean PV5 score\nread_sch &lt;- stu_sg %&gt;%\n  group_by(CNTSCHID) %&gt;%\n  summarise(mean = mean(PV5READ))\n\n# Sort based on mean PV5 score\nread_sch &lt;- read_sch[order(read_sch$mean), ]\n\n# Label where school lies\nread_sch$group &lt;- c(rep(\"Group 1\", 41), rep(\"Group 2\", 41), rep(\"Group 3\", 41), rep(\"Group 4\", 41))\n\n\n\n\n4.1.2 Relationship between Mathematics Scores and School\nThe relationship between Mathematics scores and the school the students attend will be visualised using a box plot. As box plots helps visualise the center and spread of data, clear comparisons of the mean performance between school groups can be made using side-by-side box plots.\n\n\n\n\n\n\nDesign Consideration for Box Plot\n\n\n\n\nThe mean value can be reflected in the plot using geom_text() and in-built summary functionality stat_summary()of ggplot2. As the dataframe math_sch has a variable called mean, stat_summary() refers to the variable instead of the mean function from the {base} package. To circumvent this issue, the fully qualified name base::mean is used instead of the base mean.\nThe default grid background can be removed for greater clarity using theme_bw().\nThe legend was removed using theme() as it was unnecessary for interpretation of the plot.\n\n\n\n\nEDA PlotNormality TestANOVA\n\n\nBased on the box plots, it appears that Mathematics scores are lowest in schools in the min group and highest in schools in the max group.\n\n\nCode\nmath_sch %&gt;%\n  \n  # Plotting boxplot of mean scores against groups\n  ggplot(aes(x=group, y=mean, fill=group)) +\n  geom_boxplot(alpha=0.5) +\n  \n  # Labelling plot and axis\n  ggtitle(\"Mean Mathematics Score Across Groups\") + \n  xlab(\"\") + \n  ylab(\"Mean PV5MATH Score\") +\n  \n  # Adding mean value for each group\n  stat_summary(fun=base::mean, geom=\"point\", shape=20, size=2, color=\"red\", fill=\"red\") +\n  stat_summary(fun=base::mean, color=\"red\", geom=\"text\", vjust=-4, size=3, \n               aes(label=paste(\"Mean:\", round(..y.., digits=1)))) + \n  \n  # Removing grid background\n  theme_bw() +\n  \n  # Removing legend\n  theme(legend.position=\"none\")\n\n\n\n\n\n\n\nTo ascertain our observation, tests for normality was first conducted on the distribution for each school group. A visual assessment via a Q-Q plot and a significance test via the Shapiro-Wilk’s test were used to ascertain whether the data show a serious deviation from normality. The Q-Q plot was plotted using the geom_qq() and geom_qq_line() functions from the ggplot library while the Shapiro-Wilk’s test was conducted using the shapiro_test() function from the rstatix library.\n\n\nCode\nmath_sch %&gt;%\n  ggplot(aes(sample=mean)) +\n  geom_qq() + geom_qq_line() + \n  facet_wrap(~group, scales=\"free_y\", nrow=1) +\n  labs(title=\"Normality Assumption Test\",\n       x=\"\", y=\"\") + \n  theme_bw() + \n  theme(axis.text.x=element_blank(), \n        axis.text.y=element_blank(), \n        panel.grid.major=element_blank(),\n        panel.grid.minor=element_blank(),\n        axis.ticks=element_blank())\n\n\n\n\n\n\n\nCode\nmath_sch %&gt;%\n  group_by(group) %&gt;%\n  shapiro_test(mean) %&gt;% \n  kbl() %&gt;%\n  kable_styling(full_width=FALSE, bootstrap_options = \"responsive\")\n\n\n\n\n\n\ngroup\nvariable\nstatistic\np\n\n\n\n\nGroup 1\nmean\n0.6774551\n0.0000000\n\n\nGroup 2\nmean\n0.9675082\n0.2851858\n\n\nGroup 3\nmean\n0.9253653\n0.0101652\n\n\nGroup 4\nmean\n0.9665143\n0.2640175\n\n\n\n\n\n\n\n\nSince the p-values for Groups 1 and 3 are less than 0.05, Mathematics scores do not follow a normal distribution across all groups. A non-parametric ANOVA test will thus be used to compare the mean Mathematics score.\n\n\nA non-parametric Kruskal-Wallis One-Way ANOVA test was used to compare the mean Mathematics scores across groups, with the following hypothesis:\nH0: The mean Mathematics scores is the same for all school groups.\nH1: The mean Mathematics scores is not the same for all school groups.\nThe Kruskal-Wallist and post-hoc tests was conducted using the ggbetweenstats() function from the ggstatsplot package.\n\n\nCode\nggbetweenstats(\n  data=math_sch,x=group, y=mean,\n  type=\"nonparametric\",plot.type=\"box\",\n  pairwise.comparisons=TRUE, pairwise.display=\"significant\", \n  centrality.plotting=FALSE, bf.message=FALSE)\n\n\n\n\n\nThe p-values of the Kruskal-Wallis test and all pairwise tests are less than 0.05. There is thus sufficient evidence to reject H0 and conclude that the mean Mathematics score is significantly different for each group.\n\n\n\n\n\n\n\n\n\nInsights on Relationship between Schools and Mathematics Performance\n\n\n\n\nMathematics scores are lowest in Group 1 schools and highest in Group 4 schools. The difference in mean scores between the two groups is 144.6.\nMathematics scores increases in the following order: Group 1, Group 2, Group 3, Group 4.\n\n\n\n\n\n4.1.3 Relationship between Science Scores and School\n\nEDA PlotNormalityANOVA\n\n\nBased on the bar chart, it appears that Science scores are lowest in schools in the min group and highest in schools in the max group.\n\n\nCode\nsci_sch %&gt;%\n  \n  # Plotting boxplot of mean scores against groups\n  ggplot(aes(x=group, y=mean, fill=group)) +\n  geom_boxplot(alpha=0.5) +\n  \n  # Labelling plot and axis\n  ggtitle(\"Mean Science Score Across Groups\") + \n  xlab(\"\") + \n  ylab(\"Mean PV5SCIE Score\") +\n  \n  # Adding mean value for each group\n  stat_summary(fun=base::mean, geom=\"point\", shape=20, size=2, color=\"red\", fill=\"red\") +\n  stat_summary(fun=base::mean, color=\"red\", geom=\"text\", vjust=-3, size=3, \n               aes(label=paste(\"Mean:\", round(..y.., digits=1)))) + \n  \n  # Removing grid background\n  theme_bw() +\n  \n  # Removing legend\n  theme(legend.position=\"none\")\n\n\n\n\n\n\n\n\n\nCode\nsci_sch %&gt;%\n  ggplot(aes(sample=mean)) +\n  geom_qq() + geom_qq_line() + \n  facet_wrap(~group, scales=\"free_y\", nrow=1) +\n  labs(title=\"Normality Assumption Test\",\n       x=\"\", y=\"\") + \n  theme_bw() + \n  theme(axis.text.x=element_blank(), \n        axis.text.y=element_blank(), \n        panel.grid.major=element_blank(),\n        panel.grid.minor=element_blank(),\n        axis.ticks=element_blank())\n\n\n\n\n\n\n\nCode\nsci_sch %&gt;%\n  group_by(group) %&gt;%\n  shapiro_test(mean) %&gt;% \n  kbl() %&gt;%\n  kable_styling(full_width=FALSE, bootstrap_options = \"responsive\")\n\n\n\n\n\n\ngroup\nvariable\nstatistic\np\n\n\n\n\nGroup 1\nmean\n0.7447895\n0.0000005\n\n\nGroup 2\nmean\n0.9431588\n0.0403869\n\n\nGroup 3\nmean\n0.9116637\n0.0037318\n\n\nGroup 4\nmean\n0.9505109\n0.0729322\n\n\n\n\n\n\n\n\nSince the p-values for Groups 1, 2 and 3 are less than 0.05, Science scores do not follow a normal distribution across all groups. A non-parametric ANOVA test will thus be used to compare the mean Science score.\n\n\nA non-parametric Kruskal-Wallis One-Way ANOVA test was used to compare the mean Science scores across groups, with the following hypothesis:\nH0: The mean Science scores is the same for all school groups.\nH1: The mean Science scores is not the same for all school groups.\nThe Kruskal-Wallist and post-hoc tests was conducted using the ggbetweenstats() function from the ggstatsplot package.\n\n\nCode\nggbetweenstats(\n  data=sci_sch,x=group, y=mean,\n  type=\"nonparametric\",plot.type=\"box\",\n  pairwise.comparisons=TRUE, pairwise.display=\"significant\", \n  centrality.plotting=FALSE, bf.message=FALSE)\n\n\n\n\n\nThe p-values of the Kruskal-Wallis test and all pairwise tests are less than 0.05. There is thus sufficient evidence to reject H0 and conclude that the mean Science score is significantly different for each group.\n\n\n\n\n\n\n\n\n\nInsights on Relationship between Schools and Science Performance\n\n\n\n\nScience scores are lowest in Group 1 schools and highest in Group 4 schools. The difference in mean scores between the two groups is 138.9.\nScience scores increases in the following order: Group 1, Group 2, Group 3, Group 4.\n\n\n\n\n\n4.1.4 Relationship between Reading Scores and Schools\n\nEDA PlotNormalityANOVA\n\n\nBased on the bar chart, it appears that Reading scores are lowest in schools in the min group and highest in schools in the max group.\n\n\nCode\nread_sch %&gt;%\n  \n  # Plotting boxplot of mean scores against groups\n  ggplot(aes(x=group, y=mean, fill=group)) +\n  geom_boxplot(alpha=0.5) +\n  \n  # Labelling plot and axis\n  ggtitle(\"Mean Reading Score Across Groups\") + \n  xlab(\"\") + \n  ylab(\"Mean PV5READ Score\") +\n  \n  # Adding mean value for each group\n  stat_summary(fun=base::mean, geom=\"point\", shape=20, size=2, color=\"red\", fill=\"red\") +\n  stat_summary(fun=base::mean, color=\"red\", geom=\"text\", vjust=-3, size=3, \n               aes(label=paste(\"Mean:\", round(..y.., digits=1)))) + \n  \n  # Removing grid background\n  theme_bw() +\n  \n  # Removing legend\n  theme(legend.position=\"none\")\n\n\n\n\n\n\n\n\n\nCode\nread_sch %&gt;%\n  ggplot(aes(sample=mean)) +\n  geom_qq() + geom_qq_line() + \n  facet_wrap(~group, scales=\"free_y\", nrow=1) +\n  labs(title=\"Normality Assumption Test\",\n       x=\"\", y=\"\") + \n  theme_bw() + \n  theme(axis.text.x=element_blank(), \n        axis.text.y=element_blank(), \n        panel.grid.major=element_blank(),\n        panel.grid.minor=element_blank(),\n        axis.ticks=element_blank())\n\n\n\n\n\n\n\nCode\nread_sch %&gt;%\n  group_by(group) %&gt;%\n  shapiro_test(mean) %&gt;% \n  kbl() %&gt;%\n  kable_styling(full_width=FALSE, bootstrap_options = \"responsive\")\n\n\n\n\n\n\ngroup\nvariable\nstatistic\np\n\n\n\n\nGroup 1\nmean\n0.6930397\n0.0000001\n\n\nGroup 2\nmean\n0.9266733\n0.0112172\n\n\nGroup 3\nmean\n0.9316844\n0.0164318\n\n\nGroup 4\nmean\n0.9591611\n0.1469983\n\n\n\n\n\n\n\n\nSince the p-values for Groups 1, 2 and 3 are less than 0.05, Reading scores do not follow a normal distribution across all groups. A non-parametric ANOVA test will thus be used to compare the mean Reading score.\n\n\nA non-parametric Kruskal-Wallis One-Way ANOVA test was used to compare the mean Reading scores across groups, with the following hypothesis:\nH0: The mean Reading scores is the same for all school groups.\nH1: The mean Reading scores is not the same for all school groups.\nThe Kruskal-Wallist and post-hoc tests was conducted using the ggbetweenstats() function from the ggstatsplot package.\n\n\nCode\nggbetweenstats(\n  data=read_sch,x=group, y=mean,\n  type=\"nonparametric\",plot.type=\"box\",\n  pairwise.comparisons=TRUE, pairwise.display=\"significant\", \n  centrality.plotting=FALSE, bf.message=FALSE)\n\n\n\n\n\nThe p-values of the Kruskal-Wallis test and all pairwise tests are less than 0.05. There is thus sufficient evidence to reject H0 and conclude that the mean Reading score is significantly different for each group.\n\n\n\n\n\n\n\n\n\nInsights on Relationship between Schools and Reading Performance\n\n\n\n\nReading scores are lowest in Group 1 schools and highest in Group 4 schools. The difference in mean scores between the two groups is 143.6.\nReading scores increases in the following order: Group 1, Group 2, Group 3, Group 4.\n\n\n\n\n\n4.1.5 Relationship between Schools and Overall Performance\nFrom Sections 4.1.2 to 4.1.4, we observed that performance for all subjects increases from Group 1 through to 4. It may be the case that different schools specialise in different subjects, which does not seem to be a completely unfavourable scenario as students can choose their schools based on their passion in certain areas. This would mean that the schools in each group differs from subject to subject. However, if the composition of schools in each group remain relatively stable across subjects, it would mean that high performance is clustered within a select few schools and lower performance is more prevalent in other select few schools. This may be bad news as it shows that students may face huge stress to gain entry in such Group 4 schools while students from Group 4 schools may be labelled as having poor academic performance right from the get-go.\nIn particular, we will focus on Group 1 and Group 4 as they are at the extreme ends of the performance spectrum. A Venn Diagram will be used to visualise the number of schools that are common between each pair of school groups. This gives a clear visualisation of how many schools each pair of school groups have in common. The venn.diagram() function from the VennDiagram package will be used.\n\nGroup 1 SchoolsGroup 4 Schools\n\n\n\n\nCode\n# Preparing dataset\ng1_math &lt;- math_sch %&gt;% filter(group==\"Group 1\")\ng1_math$subject &lt;- \"Math\"\ng1_sci &lt;- sci_sch %&gt;% filter(group==\"Group 1\")\ng1_sci$subject &lt;- \"Science\"\ng1_read &lt;- read_sch %&gt;% filter(group==\"Group 1\")\ng1_read$subject &lt;- \"Reading\"\ng1 &lt;- rbind(g1_math[, c(1,4)], g1_sci[, c(1,4)], g1_read[, c(1,4)])\n\n# Plotting Venn Diagram\nvenn.diagram(\n  x=list(\n    g1 %&gt;% filter(subject==\"Math\") %&gt;% select(CNTSCHID) %&gt;% unlist(),\n    g1 %&gt;% filter(subject==\"Science\") %&gt;% select(CNTSCHID) %&gt;% unlist(),\n    g1 %&gt;% filter(subject==\"Reading\") %&gt;% select(CNTSCHID) %&gt;% unlist()\n  ), \n  category.names=c(\"Math\", \"Science\", \"Reading\"), \n  filename=\"venn_g1.png\", \n  output = TRUE ,\n          imagetype=\"png\" ,\n          height = 480 , \n          width = 480 , \n          resolution = 300,\n          compression = \"lzw\",\n          lwd = 1,\n          col=c(\"#440154ff\", '#21908dff', '#fde725ff'),\n          fill = c(alpha(\"#440154ff\",0.3), alpha('#21908dff',0.3), alpha('#fde725ff',0.3)),\n          cex = 0.5,\n          fontfamily = \"sans\",\n          cat.cex = 0.3,\n          cat.default.pos = \"outer\",\n          cat.pos = c(-27, 27, 135),\n          cat.dist = c(0.055, 0.055, 0.085),\n          cat.fontfamily = \"sans\",\n          cat.col = c(\"#440154ff\", '#21908dff', '#fde725ff'),\n          rotation = 1\n)\n\n\n\n\n\nVenn Diagram of Group 1 Schools\n\n\nFrom the Venn Diagram, we can see a significant overlap of schools in Group 1. Each subject has 41 schools in Group 1. Out of the 41 schools, 31 schools belong to Group 1 for all three subjects. This means that students with the lowest performance in all three subjects are largely concentrated in the same schools.\n\n\n\n\nCode\n# Preparing dataset\ng4_math &lt;- math_sch %&gt;% filter(group==\"Group 4\")\ng4_math$subject &lt;- \"Math\"\ng4_sci &lt;- sci_sch %&gt;% filter(group==\"Group 4\")\ng4_sci$subject &lt;- \"Science\"\ng4_read &lt;- read_sch %&gt;% filter(group==\"Group 4\")\ng4_read$subject &lt;- \"Reading\"\ng4 &lt;- rbind(g4_math[, c(1,4)], g4_sci[, c(1,4)], g4_read[, c(1,4)])\n\n# Plotting Venn Diagram\nvenn.diagram(\n  x=list(\n    g4 %&gt;% filter(subject==\"Math\") %&gt;% select(CNTSCHID) %&gt;% unlist(),\n    g4 %&gt;% filter(subject==\"Science\") %&gt;% select(CNTSCHID) %&gt;% unlist(),\n    g4 %&gt;% filter(subject==\"Reading\") %&gt;% select(CNTSCHID) %&gt;% unlist()\n  ), \n  category.names=c(\"Math\", \"Science\", \"Reading\"), \n  filename=\"venn_g4.png\", \n  output = TRUE ,\n          imagetype=\"png\" ,\n          height = 480 , \n          width = 480 , \n          resolution = 300,\n          compression = \"lzw\",\n          lwd = 1,\n          col=c(\"#440154ff\", '#21908dff', '#fde725ff'),\n          fill = c(alpha(\"#440154ff\",0.3), alpha('#21908dff',0.3), alpha('#fde725ff',0.3)),\n          cex = 0.5,\n          fontfamily = \"sans\",\n          cat.cex = 0.3,\n          cat.default.pos = \"outer\",\n          cat.pos = c(-27, 27, 135),\n          cat.dist = c(0.055, 0.055, 0.085),\n          cat.fontfamily = \"sans\",\n          cat.col = c(\"#440154ff\", '#21908dff', '#fde725ff'),\n          rotation = 1\n)\n\n\n\n\n\nVenn Diagram of Group 4 Schools\n\n\nFrom the Venn Diagram, we can see a even more significant overlap of schools in Group 4. Each subject has 41 schools in Group 4. Out of the 41 schools, 37 schools belong to Group 4 for all three subjects. This means that students with the highest performance in all three subjects are largely concentrated in the same schools.\n\n\n\n\n\n\n\n\n\nInsights on Relationship between Schools and Overall Performance\n\n\n\n\nStudents with the lowest performance across all subjects are largely concentrated in the same schools\nStudents with the highest performance across all subjects are also largely concentrated in the same schools"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-performance-and-gender",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-performance-and-gender",
    "title": "Is Every School a Good School?",
    "section": "4.2 Relationship between Performance and Gender",
    "text": "4.2 Relationship between Performance and Gender\nResearch shows that females and males excel in different areas. According to a study published in American Psychologist, researchers found that girls scored higher on literacy (or reading) tests than boys after reviewing data on 3.9 million literacy tests. Conversely, Wrigley-Asante et al. (2023) explained that the overall academic performance of males was rated higher than females.\nIn this section, we explore the relationship between gender and the performance of its students. Specifically, we ask if the gender affects the performance of students in terms of their performance in Mathematics, Science and Reading.\nIn the PISA dataset, the gender of students are recorded in the ST004D01T column. A quick check of the data using the n_distinct() function from the dplyr package revealed that there were only 2 unique values in the column - 1 for female and 2 for male. Using is.na() function from the {base} package also showed that there were no missing values. Therefore, the only data wrangling step performed was to recode the column to display ‘Female’ and ‘Male’ instead of values.\n\n\nCode\n# Recoding ST004D01T column \nstu_sg$ST004D01T[stu_sg$ST004D01T == '1'] &lt;- 'Female'\nstu_sg$ST004D01T[stu_sg$ST004D01T == '2'] &lt;- 'Male'\n\n\nThe distribution of subject scores for each gender group will be visualised using a ridgeline plot. As the plots are assigned to the same horizontal scale and presented with a slight overlap, the difference in scores between both genders will be made obvious by observing whether a gender’s distribution lies to the left or right of the distribution of the other gender.\n\n\n\n\n\n\nDesign Considerations for Ridgeline Plot\n\n\n\n\nThe quantile lines are plotted into ridgeline plot in order to make the median and interquartile range obvious. The geom_density_ridges_gradient() function was used to colour the plot via the calculated after_stat(quantile) aesthetic.\nThe transparency of the fill was increased so as to better see how the distributions between both genders overlaps by using the alpha argument.\n\n\n\n\nEDA PlotNormality Testt-Test\n\n\nFrom the ridgeline plots, it appears that females outperform males in Reading while males outperform females in Mathematics and Science.\n\n\nCode\n# Pivoting dataframe for facet_wrap()\ngender &lt;- stu_sg[, c(\"ST004D01T\", \"PV5MATH\", \"PV5SCIE\", \"PV5READ\")]\ngender &lt;- gender %&gt;% pivot_longer(cols=c(\"PV5MATH\", \"PV5SCIE\", \"PV5READ\"))\n# Renaming subjects\ngender$name[gender$name == \"PV5MATH\"] &lt;- \"Mathematics\" \ngender$name[gender$name == \"PV5SCIE\"] &lt;- \"Science\" \ngender$name[gender$name == \"PV5READ\"] &lt;- \"Reading\" \n\nggplot(data=gender, aes(x=value, y=as.factor(ST004D01T), fill=factor(after_stat(quantile)))) +\n  stat_density_ridges(geom=\"density_ridges_gradient\", \n                      calc_ecdf=TRUE,\n                      quantiles=4,\n                      quantile_lines=) +\n  scale_fill_viridis_d(name=\"Quartiles\", alpha=0.7) + \n  theme_ridges() + \n  \n  # Labelling axis and plot\n  ggtitle(\"Ridgeline Plot of Subject Scores By Gender\") + \n  xlab(\"PV5 Scores\") + \n  ylab(\"\") + \n  theme(axis.title.x=element_text(hjust=0.5, vjust=0.2)) + \n  \n  facet_wrap(~ name, ncol=1)\n\n\n\n\n\n\n\nTo ascertain our observations, tests for normality was first conducted on the distribution for each gender.\n\n\nCode\ngender %&gt;%\n  ggplot(aes(sample=value)) +\n  geom_qq() + geom_qq_line() + \n  facet_wrap(~name, scales=\"free_y\", nrow=1) +\n  labs(title=\"Normality Assumption Test\",\n       x=\"\", y=\"\") + \n  theme_bw() + \n  theme(axis.text.x=element_blank(), \n        axis.text.y=element_blank(), \n        panel.grid.major=element_blank(),\n        panel.grid.minor=element_blank(),\n        axis.ticks=element_blank())\n\n\n\n\n\nThe p-values computed are as shown in the table below.\n\n\nCode\nm &lt;- gender[gender$name==\"Mathematics\", ]\nad.test(m$value)\n\ns &lt;- gender[gender$name==\"Science\", ]\nad.test(s$value)\n\nr &lt;- gender[gender$name==\"Reading\", ]\nad.test(r$value)\n\n\n\n\n\n\nMathematics\nScience\nReading\n\n\n\n\np-value\n2.2e- 16\n2.2e- 16\n2.2e- 16\n\n\n\nSince all p-values are less than 0.05, the scores for all subjects do not follow a normal distribution across both genders. A non-parametric two-sample t-test will thus be used to compare the mean subject scores.\n\n\nThree Mann-Whitney U Tests, one for each subject, were used to compare the mean scores across genders, with the following hypothesis:\nH0: The mean subject score is the same for both genders.\nH1: The mean subject score is not the same for both genders.\nThe Mann-Whitney U Test was conducted using the ggbetweenstats() function from the ggstatsplot package.\n\n\nCode\nggplot() + \n  ggbetweenstats(data = gender[gender$name==\"Mathematics\", ],\n                 x = ST004D01T, y = value,\n                 type = \"np\",messages = FALSE, \n                 ylab=\"Mathematics Scores\", xlab=\"\") + \n   ggbetweenstats(data = gender[gender$name==\"Science\", ],\n                 x = ST004D01T, y = value,\n                 type = \"np\",messages = FALSE,\n                 ylab=\"Science Scores\", xlab=\"\") +\n  ggbetweenstats(data = gender[gender$name==\"Reading\", ],\n                 x = ST004D01T, y = value,\n                 type = \"np\",messages = FALSE,\n                 ylab=\"Reading Scores\", xlab=\"\") \n\n\n\n\n\nThe p-values for the three subjects are less than 0.05. There is thus sufficient evidence to reject H0 and conclude that the mean scores is significantly different for each gender across all subjects.\n\n\n\n\n\n\n\n\n\nInsights on Relationship between Gender and Performance\n\n\n\n\nFemales perform better than males in Reading, with a difference in median scores of 18.00.\nMales perform better than females in Mathematics and Science, with a difference in median scores of 16.45 and 11.96 respectively."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-socioeconomic-status-and-performance",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#relationship-between-socioeconomic-status-and-performance",
    "title": "Is Every School a Good School?",
    "section": "4.3 Relationship between Socioeconomic Status and Performance",
    "text": "4.3 Relationship between Socioeconomic Status and Performance\nIn 2019, Mendaki researchers found a strong link between socio-economic statuses and grades in Singapore. Through cluster analysis, they found that pupils with higher scores tended to be of a relatively higher socio-economic status while those with indicators related to having a lower socio-economic platform tended to perform worse. More recently, researchers from the Singapore University of Social Science (SUSS) found increasing evidence of the link between lower socio-economic status and lower academic achievement. This may be attributed to parents from higher socio-economic status having more knowledge, resourcefulness and involvement with their child’s education journey. Parents with financial means are also better able to provide resources such as tuition to enhance their children’s learning and better provide them with a head-start in life.\nIn this section, we explore the relationship between socio-economic status and the performance of its students. Specifically, we ask if the socio-economic status affects the performance of students in terms of their performance in Mathematics, Science and Reading.\nPISA proxies the socioeconomic status of students using the PISA Index of Economic, Social and Cultural Status (ESCS). The ESCS is a composite score based on three indicators - highest parental occupation (HISEI), parental education (PARENDINT) and home possessions (HOMEPOS).\n\n4.3.1 Binning ESCS Values\nESCS is a continuous variable that ranges from -3.5488 to 2.3674. To reduce the complexity of the data and facilitate subsequent analysis, ESCS will be binned into 5 categories - Low, Mid-low, Mid, Mid-High and High using the cut() function from the dplyr package.\n\nincome &lt;- stu_sg[, c(\"PV5MATH\", \"PV5SCIE\", \"PV5READ\", \"ESCS\")] %&gt;%\n  mutate(Income=cut(ESCS, breaks=5, \n                          labels=c(\"Low\", \"Mid-low\", \"Mid\", \"Mid-high\", \"High\"),\n                          include.lowest=TRUE))\n\n\n\n4.3.2 Finding Overall Performance of Students\nStudents in Singapore take various national examinations at the end of certain education milestones to proceed to the next education level. These exams include the Primary School Leaving Examination, GCE N(T) Level, GCE N(A) Level, GCE O-Level and GCE A-Level. To ensure a holistic education, national examinations require at least one subject to be taken in each of the domains of Language, Science and Mathematics. In order to do well in such examinations, students in Singapore have to do well in all three domains. We will thus study how socio-economic status of students affect their overall performance across all three subjects instead of looking into subject-based performance.\nThe overall performance of students in the three subjects can be found by finding the mean level of proficiency.\n\n\nCode\n# Binning Science scores into proficiency levels\nincome &lt;- income %&gt;%\n  mutate(Science = case_when(\n    PV5SCIE &lt;= 409.54 ~ \"1\", \n    PV5SCIE &lt;= 484.14 ~ \"2\",\n    PV5SCIE &lt;= 558.73 ~ \"3\",\n    PV5SCIE &lt;= 633.33 ~ \"4\",\n    PV5SCIE &lt;= 707.93 ~ \"5\",\n    PV5SCIE &gt; 707.93 ~ \"6\",\n    TRUE ~ NA_character_\n  ))\n\n# Binning Mathematics scores into proficiency levels\nincome &lt;- income %&gt;%\n  mutate(Math = case_when(\n    PV5MATH &lt;= 420.07 ~ \"1\", \n    PV5MATH &lt;= 482.38 ~ \"2\",\n    PV5MATH &lt;= 544.68 ~ \"3\",\n    PV5MATH &lt;= 606.99 ~ \"4\",\n    PV5MATH &lt;= 669.30 ~ \"5\",\n    PV5MATH &gt; 669.30 ~ \"6\",\n    TRUE ~ NA_character_\n  ))\n\n# Binning Reading scores into proficiency levels\nincome &lt;- income %&gt;%\n  mutate(Read = case_when(\n    PV5READ &lt;= 407.47 ~ \"1\", \n    PV5READ &lt;= 480.18 ~ \"2\",\n    PV5READ &lt;= 552.89 ~ \"3\",\n    PV5READ &lt;= 625.61 ~ \"4\",\n    PV5READ &lt;= 698.32 ~ \"5\",\n    PV5READ &gt; 698.32 ~ \"6\",\n    TRUE ~ NA_character_\n  ))\n\n# Finding mean overall performance\nincome$Math &lt;- as.numeric(income$Math)\nincome$Science &lt;- as.numeric(income$Science)\nincome$Read &lt;- as.numeric(income$Read)\n\nincome$overall &lt;- rowMeans(income[, 6:8])\n\n\n\n\n4.3.3 Visualising Relationship between Socioeconomic Status and Performance\nStripcharts are one-dimensional scatter charts. By showing the overall performance of individual students in each socioeconomic group, we can get a clear idea of how students in one group performs compared to students in another group. This way, the relationship between socioeconomic status and performance can be inferred.\n\n\n\n\n\n\nDesign Considerations for Stripchart\n\n\n\n\nThe degree of jitter was lowered using the position argument in geom_jitter() to reduce the horizontal spacing between points in each income group for better visualisation of how the points are spread vertically. The vertical spread of the data is more important here as it shows how the overall performance varies within and across groups.\nThe transparency of points was lowered using the alpha argument in geom_jitter(). Since the points would tend to cluster, using a lower alpha value would enable visibility of points. It also creates a visual density, where higher proportion of overlaps produce darker colours.\nThe mean and standard deviation for each group was added using mean_sdl in the stat_summary() function. This allows the interquartile range to be easily seen.\n\n\n\n\nEDA PlotNormality TestANOVA\n\n\nBased on the stripchart, it appears that overall performance increases across income groups. Income group Low recorded the lowest performance while income group High recorded the highest performance\n\n\nCode\nggplot(income, aes(x=Income, y=overall, color=Income)) + \n  # Adjust degree of jitter in x-direction\n  geom_jitter(position=position_jitter(0.2), cex=1, alpha=0.25) +\n  # Adding mean and standard deviation\n  stat_summary(fun.data=\"mean_sdl\", mult=1, \n               geom=\"pointrange\", color=\"red\")\n\n\n\n\n\n\n\n\nincome %&gt;%\n  group_by(Income) %&gt;%\n  shapiro_test(overall) %&gt;% \n  kbl() %&gt;%\n  kable_styling(full_width=FALSE, bootstrap_options = \"responsive\")\n\n\n\n\n\nIncome\nvariable\nstatistic\np\n\n\n\n\nLow\noverall\n0.8776739\n0.0002052\n\n\nMid-low\noverall\n0.9502238\n0.0000000\n\n\nMid\noverall\n0.9763097\n0.0000000\n\n\nMid-high\noverall\n0.9628418\n0.0000000\n\n\nHigh\noverall\n0.9256653\n0.0611401\n\n\nNA\noverall\n0.9339609\n0.0105892\n\n\n\n\n\n\n\n\nSince the p-values of all income groups are less than 0.05, overall performance levels do not follow a normal distribution across all income groups. A non-parametric ANOVA test will thus be used to compare the mean overall performance levels.\n\n\nA non-parametric Kruskal-Wallis One-Way ANOVA test was used to compare the mean overall performance across income groups, with the following hypotheses:\nH0: The mean overall performance is the same for all income groups.\nH1: The mean overall performance is not the same for all income groups.\n\nggbetweenstats(\n  data=income,x=Income, y=overall,\n  type=\"nonparametric\",plot.type=\"box\",\n  pairwise.comparisons=TRUE, pairwise.display=\"significant\", \n  centrality.plotting=FALSE, bf.message=FALSE)\n\n\n\n\nThe p-values of the Kruskal-Wallis test and all pairwise tests are less than 0.05. There is thus sufficient evidence to reject H0 and conclude that the mean overall performance is significantly different for each income group.\n\n\n\n\n\n\n\n\n\nInsights of Relationship between Income and Overall Performance\n\n\n\n\nOverall performance across the three subjects are different for each income group, with the Low Income group performing the worst and the High Income group performing the best.\nOverall performance increases with income as evident from performance increasing the in the following order: Low Income, Mid-low Income, Mid Income, Mid-high Income and High Income."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#conclusion",
    "href": "Take_Home_Exercise/Take_Home_Ex01/Take_Home_Ex01.html#conclusion",
    "title": "Is Every School a Good School?",
    "section": "5. Conclusion",
    "text": "5. Conclusion\nIn this exercise, we used statistical plots to understand and analyse the performance of Singapore students in the PISA survey.\nIn Section 4, we explored the relationship between performance and schools, gender and socio-economic status. Statistical tests were also conducted to confirm the findings. The following findings were made:\n\nSchools affect how students in perform in all subjects, with Group 1 schools recording the best performance and Group 4 schools recording the worst performance.\nStudents with the lowest performance across all subjects are largely concentrated in the same schools. The same can be said about students with the highest performance across all subjects.\nFemales perform better than their male counterparts in Reading while males perform better than their female counterparts in Mathematics and Science.\nOverall performance increases with income levels, where students from lower-income families perform worse than their peers from higher-income families.\n\nWhile the analysis presented in this exercise is not exhaustive, it should provide some insights to Singapore’s education system and identified certain areas to work on so as to progress towards a more equitable system that will allow students from all backgrounds to excel."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html",
    "title": "DataVis Makeover",
    "section": "",
    "text": "The original dataset was downloaded from the PISA 2022 Database, titled Student Questionnaire Data File. The file downloaded was cy08msp_stu_qqq.sas7bdat."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#preliminary-steps",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#preliminary-steps",
    "title": "DataVis Makeover",
    "section": "1. Preliminary Steps",
    "text": "1. Preliminary Steps\n\n1.1 Importing Relevant R Packages\n\npacman::p_load(haven, tidyverse, ggplot2, dplyr, readr, ggpubr,\nscales,forcats, gridExtra, corrplot, Hmisc, lubridate,knitr, kableExtra,patchwork, \nggiraph, ggrepel)\n\n\n\n1.2 Preparing the Data\nAs instructed, the original data prepared by the peer should be left unchanged as much as possible unless there is value-add in supplementing the data. The data preparation steps taken by the student will thus be replicated, with adjustments made in later steps as needed.\n\n\nCode for importing data\nstu_qqq &lt;- read_sas(\"Data/cy08msp_stu_qqq.sas7bdat\")\nstu_sg &lt;- stu_qqq %&gt;% filter(CNT == \"SGP\")\nwrite_rds(stu_sg, \"Data/stu_SG.rds\")\n\n\n\nstu_qqq_SG &lt;- read_rds(\"data/stu_sg.rds\")\n\n34 variables relating to the Student ID, School ID, gender of students, ESCS index of students, and subject performance across Mathematics, Science and Reading were extracted into a new table stu_qqq_SG_01.\n\n\nCode for extracting variables\nstu_qqq_SG_01 &lt;- stu_qqq_SG[, c(\"CNTSTUID\", \"CNTSCHID\", \"ST004D01T\", \"ESCS\",\n                             \"PV1MATH\", \"PV2MATH\", \"PV3MATH\", \"PV4MATH\", \"PV5MATH\", \n                             \"PV6MATH\", \"PV7MATH\", \"PV8MATH\", \"PV9MATH\", \"PV10MATH\", \n                             \"PV1READ\", \"PV2READ\", \"PV3READ\", \"PV4READ\", \"PV5READ\", \n                             \"PV6READ\", \"PV7READ\", \"PV8READ\", \"PV9READ\", \"PV10READ\", \n                             \"PV1SCIE\", \"PV2SCIE\", \"PV3SCIE\", \"PV4SCIE\", \"PV5SCIE\", \n                             \"PV6SCIE\", \"PV7SCIE\", \"PV8SCIE\", \"PV9SCIE\", \"PV10SCIE\")]\n\nwrite_rds(stu_qqq_SG_01,\n          \"data/stu_qqq_SG_01.rds\")\n\n\nThe average Plausible Value (PV) was found for each subject. The overall performance for each student across the three subjects was also found by finding the average of the mean of the three subjects.\n\n\nCode for averaging PVs\nstu_qqq_SG_01 &lt;- stu_qqq_SG_01 %&gt;%\n  rowwise() %&gt;%\n  mutate(\n    MeanMATH = mean(c(PV1MATH, PV2MATH, PV3MATH, PV4MATH, PV5MATH, \n                      PV6MATH, PV7MATH, PV8MATH, PV9MATH, PV10MATH), na.rm = TRUE),\n    MeanREAD = mean(c(PV1READ, PV2READ, PV3READ, PV4READ, PV5READ, \n                      PV6READ, PV7READ, PV8READ, PV9READ, PV10READ), na.rm = TRUE),\n    MeanSCIE = mean(c(PV1SCIE, PV2SCIE, PV3SCIE, PV4SCIE, PV5SCIE, \n                      PV6SCIE, PV7SCIE, PV8SCIE, PV9SCIE, PV10SCIE), na.rm = TRUE),\n    MeanOverall=mean(c(PV1MATH, PV2MATH, PV3MATH, PV4MATH, PV5MATH, \n                      PV6MATH, PV7MATH, PV8MATH, PV9MATH, PV10MATH,\n                      PV1READ, PV2READ, PV3READ, PV4READ, PV5READ, \n                      PV6READ, PV7READ, PV8READ, PV9READ, PV10READ,\n                      PV1SCIE, PV2SCIE, PV3SCIE, PV4SCIE, PV5SCIE, \n                      PV6SCIE, PV7SCIE, PV8SCIE, PV9SCIE, PV10SCIE), na.rm = TRUE)\n  ) %&gt;%\nungroup() %&gt;%\nselect(-matches(\"^PV\\\\d+MATH$\"), -matches(\"^PV\\\\d+READ$\"), \n       -matches(\"^PV\\\\d+SCIE$\"), MeanMATH, MeanREAD, MeanSCIE,MeanOverall)"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#data-visualisation-critique",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#data-visualisation-critique",
    "title": "DataVis Makeover",
    "section": "2. Data Visualisation Critique",
    "text": "2. Data Visualisation Critique\nThe critique and improvements proposed will be based on clarity and aesthetics."
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#scatter-plot-of-score-against-meanoverall",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#scatter-plot-of-score-against-meanoverall",
    "title": "DataVis Makeover",
    "section": "2.1 Scatter Plot of Score Against MeanOverall",
    "text": "2.1 Scatter Plot of Score Against MeanOverall\nIn the original scatterplot designed, the mean overall score and mean Science scores were plotted against the ESCS index to visualise the relationship between the overall scores and Science scores with socioeconomic status as shown below.\n\n\nCode for original scatterplot\nggplot(stu_qqq_SG_01, aes(x = ESCS)) +\n  geom_point(aes(y = MeanOverall, color = \"Overall\"), alpha = 0.5) +\n  geom_smooth(aes(y = MeanOverall, color = \"Overall\"), method = 'lm') +\n  geom_point(aes(y = MeanSCIE, color = \"Science\"), alpha = 0.5) +\n  geom_smooth(aes(y = MeanSCIE, color = \"Science\"), method = 'lm') +\n  scale_color_manual(values = c(\"Overall\" = \"lightseagreen\", \"Science\" = \"palevioletred1\"),\n                     name = \"Subject\", \n                     labels = c(\"Overall\" = \"Mean Overall\", \"Science\" = \"Mean Science\")) +\n  theme_minimal() +\n  labs(title = \"Relationship Between ESCS and Academic Performance\",\n       x = \"ESCS Index\", y = \"Score\")\n\n\n\n\n\n\n2.1.1 Critique of Scatterplot\n\nClarityAesthetics\n\n\n\nThe choice of a scatterplot with trend lines was good for visualising the relationship between the overall performance and subject-specific performance.\nDue to the numerous records, the points are highly clustered together in the plot. Coupled with the relatively high opacity of the points (alpha=0.5), the middle region of the plot is obscured. The points for overall performance and Science performance cannot be differentiated due to the high density of markers in the middle region. Further, the concentrated markers are covering the two trend lines. Important information may thus not be visible.\nThe confidence intervals of the trend lines overlap largely due to the close proximity of the two lines. This makes it impossible to differentiate the confidence intervals of the lines.\nThe title is descriptive but serves little purpose in explaining the visualisation. It does not tell the audience the context, such as the main highlight or story.\nThe axes label does not aid the audience in interpreting the graph as Mean Overall does not explain anything if there is no context provided on the data preparation steps.\nThere is no caption to present the source of the data.\n\n\n\n\nThe white background ensures the contrast between the background and the plot elements is obvious, making the plot stand out clearly.\nThe soft grid lines used ensure minimal distraction from the data.\nThere are no tick marks, making it rather hard to read the axes especially since both axes are using a continuous scale.\nThere is significant white space due to the legend.\n\n\n\n\n\n\n2.1.2 Proposed Improvements for Scatterplot\nOne of the main problems of the original visualisation is the highly cluttered points obscuring important information. In depicting the relationship between academic performance and socioeconomic status, the trend lines are the most salient and should draw the most attention. In contrast, the individual scores should remain in the background and only serve to supplement the trend line.\nTo facilitate this, the trend line for overall performance and Science performance can be plotted using a darker shade compared to its corresponding subject marker. The score markers can be made more transparent by increasing alpha and its border can be made thinner using stroke so that the markers do not overwhelm the plot area. A sketch of the proposed changes is shown below. Furthermore, the confidence interval of each line can be differentiated by setting its colour to correspond to its marker and trend line using fill.\n\n\n\nProposed Sketch of Improved Scatterplot\n\n\n\n\n2.1.3 Makeover of Scatterplot\n\n\n\n\n\n\nggplot2 Explanation\n\n\n\nFor the score markers for overall and Science performance:\n\nThe transparency of the score markers was increased by setting alpha=0.15.\nThe size of the score markers was decreased by setting size=1.\nThe border around the score markers was removed by setting stroke=NA.\n\nFor the trend lines for overall performance and Science:\n\nThe colour of the trend line was set to a darker shade by setting the color argument to specific RGB codes.\nThe colour of the confidence interval was set to a shade lighter than the trend line by setting the fill argument to specific RGB codes.\n\nFor other aspects of the plot,\n\nThe title and subtitle were added using the ggtitle() function. The appearance and position of the titles were adjusted using the plot.title argument of the theme() function. Appearance can be controlled with options such as family, size or color while position can be controlled with hjust and vjust. The title and subtitle position was set respect to the whole plot instead of the panel using the plot.title.position component of the theme function.\nThe axes labels were added using scale_y_continuous and scale_x_continuous.\nThe legend was adjusted using the legend.position, legend.title and legend.text arguments of the theme() function. As the marker size is set to 1 in the geom_point(), the markers are displayed as-is in the legend. This makes the legend rather hard to read as the points are very small. To change the size of the markers shown in the legend, guide() and guide_legend() was used to override the aesthetic parameters stated in geom_point() so the aesthetic parameters of the legend key can be specified instead.\nThe caption was added using the caption argument in the labs() function.\n\n\n\n\nMakeover PlotCode\n\n\n\n\n\n\nggplot(data=stu_qqq_SG_01, aes(x=ESCS)) + \n  scale_color_manual(values = c(\"Overall Score\"=\"lightseagreen\", \"Science Score\"=\"palevioletred1\")) +\n  theme_bw() +\n  \n  geom_point(aes(y = MeanOverall, color = \"Overall Score\"), \n             # Increasing transparency of marker\n             alpha=0.15, \n             # Decreasing size of marker\n             size=1,\n             # Removing border around marker\n             stroke=NA) +\n  geom_point(aes(y=MeanSCIE, color=\"Science Score\"), alpha=0.15, size=1, stroke=NA) +\n  \n  geom_smooth(aes(y=MeanOverall), method=\"lm\", \n              # Setting colour of trendline to darker shade \n              color='#F26B8A', \n              # Setting colour of confidence interval to correspond with markers and line\n              fill='#FE7F9C') + \n  geom_smooth(aes(y=MeanSCIE), method=\"lm\", color='#028A0F', fill='#5DBB63') + \n   \n  # Adding a title and subtitle\n  ggtitle(label=\"Socio-economically advantaged students perform better at both the subject \\nlevel and overall level\",\n       subtitle=\"Mean scores (Overall and Science) against ESCS index\") +\n  theme(plot.title=element_text(face='bold', size=13), \n        plot.subtitle=element_text(size=10),\n        plot.title.position=\"plot\") + \n  \n  # Adjusting axes\n  scale_x_continuous(name=\"ESCS Index\") + \n  scale_y_continuous(name=\"Mean Score\") +\n  \n  # Adjusting legend\n  theme(legend.position=\"top\", \n        legend.title=element_blank(), \n        legend.text=element_text(size=8)) +\n  guides(color=guide_legend(override.aes=list(size=4))) + \n  \n  # Adding caption\n  labs(caption=\"Source: PISA 2022 Database - Student questionnaire data file\", size=6)\n\n\n\n\n\n\n2.1.4 Interactivity of Scatterplot\nHowever, there are still overlaps of elements in the proposed scatterplot. The two trend lines are extremely close together, causing one to cover the other significantly. There are two possible solutions to this issue:\n\nRemove one of the trend lines. As both trend lines are almost running in parallel and extremely close to each other, some might argue they are displaying the same relationship between academic performance and socioeconomic status. Having both the subject-specific and overall trend lines may thus be excessive. However, only retaining the trend line for overall performance hides valuable subject-level information. It may be the case where one subject performance displays a relationship with socioeconomic status opposite to that of the other two but its effects was cancelled out when overall performance was found. Only retaining the trend line for Science would not inform readers of the relationship with overall performance, which is likely the main concern for most.\nIntroduce interactivity in the plots. The trend lines for overall score and Science scores can be differentiated using hover effects where the reader can hover their mouse over the visualisation to highlight one trend line.\n\nThe below tabset show details the preliminary steps taken to develop the interactive scatterplot.\n\nCode for Data PreparationCode for Plotting\n\n\nTo prepare for interactive data visualisation, the data was converted from wide to long format by pivoting the MeanSCIE and MeanOverall columns to a single column and adding a new column for Subject.\n\ncolnames(stu_qqq_SG_01)[7] = \"Overall\"\ncolnames(stu_qqq_SG_01)[8] = \"Science\"\n\nstu_qqq_SG_02 &lt;- pivot_longer(stu_qqq_SG_01[, c(4, 7, 8)], cols=c(\"Overall\", \"Science\"))\n\ncolnames(stu_qqq_SG_02)[2] = \"Subject\"\ncolnames(stu_qqq_SG_02)[3] = \"Score\"\n\nstu_qqq_SG_02 &lt;- na.omit(stu_qqq_SG_02)\n\n\n\n\nplot2 &lt;- \nggplot(data=stu_qqq_SG_02, aes(x=ESCS, y=Score)) +\n  theme_bw() +\n  ggtitle(label=\"Socio-economically advantaged students perform better at both the \\nsubject level and overall level\",\n       subtitle=\"Mean scores (Overall and Science) against ESCS index\") +\n  theme(plot.title=element_text(face='bold', size=13), \n        plot.subtitle=element_text(size=10),\n        plot.title.position=\"plot\") + \n  scale_x_continuous(name=\"ESCS Index\") + \n  scale_y_continuous(name=\"Mean Score\") +\n  theme(legend.position=\"top\", \n        legend.title=element_blank(), \n        legend.text=element_text(size=8)) +\n  guides(color=guide_legend(override.aes=list(size=4))) + \n  labs(caption=\"Source: PISA 2022 Database - Student questionnaire data file\", size=6) + \n  \n  geom_point_interactive(aes(data_id=Subject, tooltip=Subject, color=Subject),\n                         alpha=0.15, size=1, stroke=NA) + \n  \n  geom_smooth_interactive(aes(data_id=Subject, tooltip=Subject, color=Subject),\n                         method=\"lm\", se=FALSE,\n                         linewidth=0.5)\n\n\n\n\n\n\n2.1.5 Final Visualisation for Scatterplot\n\n\n\n\n\n\nIntroducing Interactivity\n\n\n\nIn the revised improved scatterplot, the interactivity of the plot was introduced by using geom_point_interactive() and geom_smooth_interactive(). The user can toggle between the trend lines for overall performance and Science performance. To illustrate, when the user places his/her cursor over the trend line or any marker for overall performance, the trend line for overall performance and the score markers for overall performance will be highlighted in pink and purple respectively. Elements irrelevant to overall performance (trend line and score markers for Science performance) will be greyed out. This allows for increased clarity for overall performance by reducing the clutter visible to the reader.\n\n\n\ngirafe(ggobj=plot2, \n       width_svg=6, \n       height_svg=6*0.618, \n       options=list(\n         opts_hover(css=\"fill:purple;\"), \n         opts_hover_inv(css=\"fill:grey; opacity:0.2;\")))"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#strip-chart-of-school-and-academic-performance",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#strip-chart-of-school-and-academic-performance",
    "title": "DataVis Makeover",
    "section": "2.2 Strip Chart of School and Academic Performance",
    "text": "2.2 Strip Chart of School and Academic Performance\nIn the original stripchart designed, the mean score of each subject was plotted against the student’s School ID to visualise the relationship between the student’s school and academic performance as shown below.\n\n\nCode\ncolnames(stu_qqq_SG_01)[7] = \"MeanOverall\"\ncolnames(stu_qqq_SG_01)[8] = \"MeanSCIE\"\n\nlong_data &lt;- stu_qqq_SG_01 %&gt;%\n  gather(key = \"Subject\", value = \"Score\", MeanMATH, MeanREAD, MeanSCIE, MeanOverall) %&gt;%\n  group_by(CNTSCHID, Subject) %&gt;%\n  summarise(AverageScore = mean(Score, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  mutate(Label = ifelse(AverageScore &gt; 650 | AverageScore &lt; 450, as.character(CNTSCHID), \"\"))\n\n# Create a dot plot to compare the average performance of different schools\nggplot(long_data, aes(x = CNTSCHID, y = AverageScore, color = Subject)) +\n  geom_point(position = position_dodge(width = 0.5)) +\n  geom_text(aes(label = Label), check_overlap = TRUE, vjust = -1, position = position_dodge(width = 0.5)) +\n  theme_minimal() +\n  labs(title = \"Comparison of School Performance in Subjects\",\n       x = \"School ID\", y = \"Average Score\") +\n  scale_color_brewer(palette = \"Set1\") +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1)) \n\n\n\n\n\n\n2.2.1 Critique of Stripchart\n\nClarityAesthetics\n\n\n\nWith 167 schools each having 4 points, the large number of points clutters the entire plot and causes any valuable insights to be unintuitive. The relationship between the choice of school and academic performance is rather hidden and careful scrutiny of the plot is required to decipher the relationship.\nThe x-axis plots the 8-digit School ID in ascending order, which serves little purpose for two reasons. First, the first five digits of 70200 are the same for all schools in Singapore as it is the 6-digits National Centre Code. The unique identifier for schools is only the last three digits, indicating that retaining the whole 8-digit code is only adding on to the clutter in the plot and has little value-add. Second, no contextual background was provided by PISA on the School IDs. Therefore, simply sorting the x-axis of School IDs in ascending order does not aid in increasing the clarity or interpretability of the visualisation.\nFour points were plotted for each school, namely the mean scores for Science, Reading, Mathematics and overall performance. However, the mean overall score was computed as the average of the other 3 subject scores. With the overall score being a linearly derived value of the other 3 variables, it would not only clutter the data but also not provide any additional valuable insights.\nThe title is descriptive but serves little purpose in explaining the visualisation. It does not tell the audience the context, such as the main highlight or story.\nThe axes label does not aid the audience in interpreting the graph as MeanMATH, MeanOverall, MeanREAD and MeanSCIE does not explain anything if there is no context provided on the data preparation steps.\nThere is no caption to present the source of the data.\n\n\n\n\nThe white background ensures the contrast between the background and plot elements is obvious, making the plot stand out clearly.\nThe soft grid lines used ensure minimal distraction from the data.\nThere is significant white space due to the legend.\nThe x-axis labels are vertical, which makes it rather hard to read.\n\n\n\n\n\n\n2.2.2 Proposed Improvements for Strip Chart\nThe first main improvement would be to remove the first five digits of the School ID for all records as only the last three digits serve as the unique identifier for schools in Singapore. This will help to significantly reduce the clutter around the x-axis and plot area when using the School ID to label the axis and salient data points.\nThe second main improvement would be to include 15th and 85th quartiles of the overall scores in the visualisation. Data points lying within the stipulated range coloured grey as they are less relevant in finding the relationship between schools and academic performance as they form the majority of the data and provides no value in identifying schools that has exceptionally high or low performances. By colouring such points grey and leaving data points falling outside the specified coloured, it draws attention to the more salient outlier points and reduces the clutter introduced by the less relevant majority points. Furthermore, using quartiles to identify schools with relatively higher or lower performance is a more data-driven approach compared to the peer’s method of using absolute values derived from observation of the visualisation.\nThe third main improvement would be to sort the x-axis (hence School IDs) by the mean overall performance. This way, the schools at the extreme ends with relatively lower or higher academic performance can be more easily identified.\n\n\n\nProposed Improved Strip Chart\n\n\n\n\n2.2.3 Makeover of Scatterplot\n\n\n\n\n\n\nggplot2 Explanation\n\n\n\n\nThe interquartile range was added using the annotate() function from the ggplot2 package. annotate() was used instead of geom_rect() as geom_rect() expects the same amount of data as that passed to ggplot(). It will thus plot hundreds of rectangles above each other, causing lowering the alpha to have little to no impact on the transparency of the rectangle. In contrast, annotate() draws the exact amount of rectangles as specified by the coordinates. This often having only one or few rectangles drawn such that its transparency can be much easily adjusted.\nThe data points that falls within the interquartile range was coloured grey by creating a category “In Range” in the Subject column. If the score falls within the 15th and 85th quantile, its subject records was replaced with”In Range” in the Subject column. The colours were then manually set using scale_color_manual() to assign grey to the “In Range” category in Subject.\nThe x-axis was sorted based on ascending order of mean overall scores using the fct_reorder() function.\nThe x-axis labels and ticks were removed as labelling all 167 schools will only clutter up the plot area.\nThe labels for schools with two or more subjects falling outside the 15th and 85th quartiles were added using geom_text_repel() instead of geom_text() as it helps repel text labels away from each other so that the labels do not interfere with each other.\nVertical grid lines were removed using panel.grid.major() as the numerous lines was cluttering the visualisation.\n\n\n\n\nCode for Data PreparationCode for Plotting\n\n\n\n# Removing first 5 digits of CNTSCHID\nlong_data$CNTSCHID &lt;- substr(long_data$CNTSCHID, 6, 8)\n\n# Removing MeanOverall \nlong_data &lt;- long_data[-which(long_data$Subject %in% \"MeanOverall\"), ]\n\n# Renaming subject records\nlong_data$Subject &lt;- ifelse(long_data$Subject == \"MeanREAD\", \"Reading\", long_data$Subject)\nlong_data$Subject &lt;- ifelse(long_data$Subject == \"MeanMATH\", \"Mathematics\", long_data$Subject)\nlong_data$Subject &lt;- ifelse(long_data$Subject == \"MeanSCIE\", \"Science\", long_data$Subject)\n\n# Finding 15th and 85th percentile for MeanOverall \nqr1 &lt;- quantile(stu_qqq_SG_01$MeanOverall, c(0.15, 0.85))[[\"15%\"]]\nqr2 &lt;- quantile(stu_qqq_SG_01$MeanOverall, c(0.15, 0.85))[[\"85%\"]]\n\n# Checking if point is within range \nlong_data$Subject &lt;- ifelse(long_data$AverageScore&lt;=qr2 & \n                              long_data$AverageScore&gt;=qr1, \n                            \"In Range\", long_data$Subject)\n\n# Adding column for MeanOverall\noverall &lt;- stu_qqq_SG_01 %&gt;% select(CNTSCHID, MeanOverall)\noverall$CNTSCHID &lt;- substr(overall$CNTSCHID, 6, 8)\ndf &lt;- overall %&gt;% group_by(CNTSCHID) %&gt;% summarise(overall = mean(MeanOverall))\nlong_data &lt;- merge(long_data, df, by=\"CNTSCHID\")\n\n# Finding schools with 2 or more points outside of range\nlong_data$in_range &lt;- ifelse(long_data$AverageScore&lt;=qr2 & long_data$AverageScore&gt;=qr1, 1, 0)\ncheck &lt;- long_data %&gt;% group_by(CNTSCHID) %&gt;% summarise(sum=sum(in_range)) \ncheck &lt;- check[rep(seq_len(nrow(check)), each=3), ] \nlong_data$in_range &lt;- ifelse(check$sum&gt;=2, 0, 1)\nlong_data$Label &lt;- ifelse(long_data$in_range==1 & long_data$Subject==\"Mathematics\", long_data$CNTSCHID, \"\")\n\n\n\n\nggplot(long_data, aes(x=fct_reorder(CNTSCHID, overall), y=AverageScore, color=Subject)) +\n  theme_bw() + \n  scale_x_discrete(expand=c(-1, 170)) +\n    scale_y_continuous(limit=c(329, 750)) +\n  # Removing vertical grid lines \n  theme(panel.grid.major = element_blank(),\n        axis.text.x=element_blank(), \n        axis.ticks.x=element_blank()) +\n  \n  geom_point(position = position_dodge(width=0.5)) +\n  \n  # Shading interquartile range\n  annotate(\"rect\", alpha=0.4, fill=\"grey\",\n           xmin=-Inf, xmax=Inf,\n           ymin=qr1,\n           ymax=qr2) +\n  \n  # Colouring points within IQR grey\n  scale_color_manual(values=c(\"Mathematics\"=\"palevioletred1\", \n                              \"Science\"=\"lightseagreen\", \n                              \"Reading\"=\"lightblue\", \n                              \"In Range\"=\"lightgrey\")) + \n  \n  # Labelling plot and axes\n  labs(title=\"Choice of school affects academic performance\", \n       subtitle=expression(atop(\n         \"Mean Subject Scores against School ID\", \n         scriptstyle(italic(\"Schools with two or more subjects falling outside the 15th and 85th percentile are labelled in the plot.\")))), \n       caption=\"Source: PISA 2022 Database - Student questionnaire data file\", size=6, \n       x=\"School\\n(sorted in ascending order of Mean Overall Score)\", \n       y=\"Mean Subject Score\") + \n  theme(plot.title=element_text(face='bold', size=13, hjust=0.5), \n        plot.subtitle=element_text(size=10, hjust=0.5),\n        plot.title.position=\"plot\") + \n  \n  # Changing position of legend\n  theme(legend.position=\"top\", \n      legend.title=element_blank(), \n      legend.text=element_text(size=8)) +\n    scale_fill_manual(\n      values=c(\"palevioletred1\", \"lightblue\", \"lightseagreen\", \"lightgrey\"), \n      breaks=c(\"Mathematics\", \"Reading\", \"Science\")) +\n  \n  # Labelling schools with 2 or more subjects \n  geom_text_repel(aes(label = Label), \n            vjust = -1, \n            position = position_dodge(width = 0.5), \n            color=\"black\", \n            size=3) \n\n\n\n\n\n\n2.2.4 Final Visualisation for Strip Chart\n\n\nCode\nggplot(long_data, aes(x=fct_reorder(CNTSCHID, overall), y=AverageScore, color=Subject)) +\n  theme_bw() + \n  scale_x_discrete(expand=c(-1, 170)) +\n    scale_y_continuous(limit=c(329, 750)) +\n  # Removing vertical grid lines \n  theme(panel.grid.major = element_blank(),\n        axis.text.x=element_blank(), \n        axis.ticks.x=element_blank()) +\n  \n  geom_point(position = position_dodge(width=0.5)) +\n  \n  # Shading interquartile range\n  annotate(\"rect\", alpha=0.4, fill=\"grey\",\n           xmin=-Inf, xmax=Inf,\n           ymin=qr1,\n           ymax=qr2) +\n  \n  # Colouring points within IQR grey\n  scale_color_manual(values=c(\"Mathematics\"=\"palevioletred1\", \n                              \"Science\"=\"lightseagreen\", \n                              \"Reading\"=\"lightblue\", \n                              \"In Range\"=\"lightgrey\")) + \n  \n  # Labelling plot and axes\n  labs(title=\"Choice of school affects academic performance\", \n       subtitle=expression(atop(\n         \"Mean Subject Scores against School ID\", \n         scriptstyle(italic(\"Schools with two or more subjects falling outside the 15th and 85th percentile are labelled in the plot.\")))), \n       caption=\"Source: PISA 2022 Database - Student questionnaire data file\", size=6, \n       x=\"School\\n(sorted in ascending order of Mean Overall Score)\", \n       y=\"Mean Subject Score\") + \n  theme(plot.title=element_text(face='bold', size=13, hjust=0.5), \n        plot.subtitle=element_text(size=10, hjust=0.5),\n        plot.title.position=\"plot\") + \n  \n  # Changing position of legend\n  theme(legend.position=\"top\", \n      legend.title=element_blank(), \n      legend.text=element_text(size=8)) +\n    scale_fill_manual(\n      values=c(\"palevioletred1\", \"lightblue\", \"lightseagreen\", \"lightgrey\"), \n      breaks=c(\"Mathematics\", \"Reading\", \"Science\")) +\n  \n  # Labelling schools with 2 or more subjects \n  geom_text_repel(aes(label = Label), \n            vjust = -1, \n            position = position_dodge(width = 0.5), \n            color=\"black\", \n            size=3)"
  },
  {
    "objectID": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#learning-points",
    "href": "Take_Home_Exercise/Take_Home_Ex02/Take_Home_Ex02.html#learning-points",
    "title": "DataVis Makeover",
    "section": "3. Learning Points",
    "text": "3. Learning Points\nIn this exercise, ggplot2 and its extensions were used to critique and makeover peer works, which aids in the implementation of best practices in data visualisation. It is important to take a step back occasionally while building visualisations to ensure that the visualisation continues to be clear and intuitive. For example, the second visualisation was overly cluttered with the numerous points and excessively long data labels. It would thus be helpful to step back to think whether all elements included in the plot are essential in delivering our message. In our case, the points falling within the 15th and 85th quantiles were redundant in showing that the choice of schools affect academic performance while the length of the data labels could be reduced by removing the first five digits as they did not provide any information on the school."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ISSS608-VAA",
    "section": "",
    "text": "Welcome to ISSS608 Visual Analytics and Applications. In this website, you will find my coursework prepared for this course."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html",
    "href": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html",
    "title": "ISSS608-VAA",
    "section": "",
    "text": "This chapter introduces several ggplot2 extensions for creating more elegant and effective statistical graphics. Specifically, the following will be explained:\n\nControlling the placement of annotation on a graph by using functions provided in ggrepel package,\nCreating professional publication quality figures by using functions provided in ggthemes and hrbrthemes packages, and\nPlotting composite figures by combining ggplot2 graphs using patchwork package."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#overview",
    "href": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#overview",
    "title": "ISSS608-VAA",
    "section": "",
    "text": "This chapter introduces several ggplot2 extensions for creating more elegant and effective statistical graphics. Specifically, the following will be explained:\n\nControlling the placement of annotation on a graph by using functions provided in ggrepel package,\nCreating professional publication quality figures by using functions provided in ggthemes and hrbrthemes packages, and\nPlotting composite figures by combining ggplot2 graphs using patchwork package."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#getting-started",
    "href": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#getting-started",
    "title": "ISSS608-VAA",
    "section": "2.2 Getting Started",
    "text": "2.2 Getting Started\n\n2.2.1 Installing and loading required libraries\nFour R packages will be used: - ggrepel: provides geoms for ggplot2 to repel overlapping text labels - ggthemes: provides some extra themes, geoms and scales for ggplot2 - hrbrthemes: provides typography-centric themes and theme components for ggplot2 - patchwork: prepares composite figures creating using ggplot2\nThe code chunk below will be used to check if these packages have been installed and will load them onto the working R environment.\n\npacman::p_load(ggrepel, patchwork, ggthemes, hrbrthemes, tidyverse)\n\n\n\n2.2.2 Importing data\nFor the purpose of this exercise, a data file called Exam_data will be used. It consists of year end examination grades of a cohort of primary 3 students from a local school. It is in csv file format.\nThe code chunk below imports exam_data.csv into R environment by using read_csv() function of readr package. readr is one of the tidyverse package.\n\nexam_data &lt;- read_csv(\"data/Exam_data.csv\")\n\nThere are a total of seven attributes in the exam_data tibble data frame. Four of them are categorical data tyle and the other three are in continuous data tyle. - The categorical attributes are: ID, CLASS, GENDER and RACE. - The continuous attributes are: MATHS, ENGLISH and SCIENCE.\n\n\n2.3 Beying ggplot2 Annotation: ggrepel\nOne of the challenge of plotting statistical graph is annotation, especially with large number of data points.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label(aes(label = ID), \n             hjust = .5, \n             vjust = -.5) +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n\n\n\n\nggrepel is an extension of ggplot2 package to provide geoms for ggplot2 to repel overlapping text as in out example above. We simply replace geom_text() with geom_text_repel() and geom_label() with geom_label_repel().\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n       aes(x= MATHS, \n           y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  geom_label_repel(aes(label = ID), \n                   fontface = \"bold\") +\n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#beyond-ggplot2-themes",
    "href": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#beyond-ggplot2-themes",
    "title": "ISSS608-VAA",
    "section": "2.4 Beyond ggplot2 Themes",
    "text": "2.4 Beyond ggplot2 Themes\nggplot2 comes with eight built-in themes, namely theme_gray(), theme_bw(), theme_classic(), theme_dark(), theme_light(), theme_linedraw(), theme_minimal(), and theme_void().\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  theme_gray() +\n  ggtitle(\"Distribution of Maths scores\") \n\n\n\n\n\n2.4.1 Working with ggtheme Package\nggthemes provides ggplot2 themes that replicate the look of plots by Edward Tufte, Stephen Few, Fivethirtyeight, The Economist, Stata, Excel and The Wall Street Journal, among others.\nIn the example below, The Economist theme was used.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_economist()\n\n\n\n\n\n\n2.4.2 Working with hrbrthemes Package\nhrbrthemes package provides a base theme that focuses on typographic elements, including where various labels are placed as well as the fonts that are used.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum()\n\n\n\n\nThe second goal centers around productivity for a production workflow. In fact, this “production workflow” is the context for where the elements of hrbrthemes should be used. Consult this vignette to learn more.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\nggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  ggtitle(\"Distribution of Maths scores\") +\n  theme_ipsum(axis_title_size = 18,\n              base_size = 15,\n              grid = \"Y\")\n\n\n\n\n\n\n\n\n\n\nWhat can we learn from the code chunk above?\n\n\n\n\naxis_title_size argument is used to increase the font size of the axis title to 18,\nbase_size argument is used to increase the default axis label to 15, and\ngrid argument is used to remove the x-axis grid lines."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#beyond-single-graph",
    "href": "Hands_On_Exercise/Hands_On_Ex02/Hands_On_Ex02.html#beyond-single-graph",
    "title": "ISSS608-VAA",
    "section": "2.5 Beyond Single Graph",
    "text": "2.5 Beyond Single Graph\nIt is not unusual that multiple graphs are required to tell a compelling visual story. There are several ggplot2 extensions with functions to compose figures with multiple graphs.\nFirst, three statistical graphics are created using the code chunk below.\n\nCode 1Plot 1Code 2Plot 2Code 3Plot 3\n\n\n\np1 &lt;- ggplot(data=exam_data, \n             aes(x = MATHS)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") + \n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of Maths scores\")\n\n\n\n\nprint(p1)\n\n\n\n\n\n\n\np2 &lt;- ggplot(data=exam_data, \n             aes(x = ENGLISH)) +\n  geom_histogram(bins=20, \n                 boundary = 100,\n                 color=\"grey25\", \n                 fill=\"grey90\") +\n  coord_cartesian(xlim=c(0,100)) +\n  ggtitle(\"Distribution of English scores\")\n\n\n\n\nprint(p2)\n\n\n\n\n\n\n\np3 &lt;- ggplot(data=exam_data, \n             aes(x= MATHS, \n                 y=ENGLISH)) +\n  geom_point() +\n  geom_smooth(method=lm, \n              size=0.5) +  \n  coord_cartesian(xlim=c(0,100),\n                  ylim=c(0,100)) +\n  ggtitle(\"English scores versus Maths scores for Primary 3\")\n\n\n\n\nprint(p3)\n\n\n\n\n\n\n\n\n2.5.1 Creating Composite Graphics using patchwork\npatchwork is a ggplot2 extension specifically designed for combining separate ggplot2 graphs into a single figure.\nThe patchwork package has a simple syntax to create layouts easily. Here’s the general syntax that combines: - Two-Column Layout using the plus sign + - Subgroup Plot using parenthesis () - Two-Row Layout using division sign /\n\n\n2.5.2 Combining Two ggplot2 Graphs\nFigure in the tabset below shows a composite of two histograms created using patchwork. Note how simple the syntax used to create the plot!\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\np1 + p2\n\n\n\n\n\n\n2.5.3 Combining Three ggplot2 Graphs\nWe can plot more complex composite by using appropriate operators. For example, the composite figure below is plotted by using:\n\n“|” operator to stack two ggplot2 graphs,\n“/” operator to place the plots beside each other,\n“()” operator the define the sequence of the plotting.\n\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\n(p1 / p2) | p3\n\n\n\n\nTo learn more, refer to Plot Assembly.\n\n\n2.5.4 Creating Composite Figures with Tags\nIn order to identify subplots in text, patchwork also provides auto-tagging capabilities as shown below.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\n((p1 / p2) | p3) + \n  plot_annotation(tag_levels = 'I')\n\n\n\n\n\n\n2.5.5 Creating Figure with Insert\nBeside providing functions to place plots next to each other based on the provided layout. With inset_element() of patchwork, we can place one or several plots or graphic elements freely on top or below another plot.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\np3 + inset_element(p2, \n                   left = 0.02, \n                   bottom = 0.7, \n                   right = 0.5, \n                   top = 1)\n\n\n\n\n\n\n2.5.6 Creating Composite Figure using patchwork and ggtheme\nFigure below is created by combining patchwork and theme_economist() of ggthemes package discussed earlier.\n\nPlotCode\n\n\n\n\n\n\n\n\n\n\npatchwork &lt;- (p1 / p2) | p3\npatchwork & theme_economist()"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html",
    "href": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html",
    "title": "Hands-on-Exercise-1",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if tidyverse packages are installed in the computer. If they are installed, they will be launched into R.\n\npacman::p_load(tidyverse)\n\n\n\n\n\nexam_data &lt;- read_csv(\"Data/Exam_data.csv\")\n\nRows: 322 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): ID, CLASS, GENDER, RACE\ndbl (3): ENGLISH, MATHS, SCIENCE\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#getting-started",
    "href": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#getting-started",
    "title": "Hands-on-Exercise-1",
    "section": "",
    "text": "The code chunk below uses p_load() of pacman package to check if tidyverse packages are installed in the computer. If they are installed, they will be launched into R.\n\npacman::p_load(tidyverse)\n\n\n\n\n\nexam_data &lt;- read_csv(\"Data/Exam_data.csv\")\n\nRows: 322 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): ID, CLASS, GENDER, RACE\ndbl (3): ENGLISH, MATHS, SCIENCE\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#using-ggplot2",
    "href": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#using-ggplot2",
    "title": "Hands-on-Exercise-1",
    "section": "Using ggplot2",
    "text": "Using ggplot2\n\ngeom_point for drawing individual points (e.g., scatter plot)\ngeom_line for drawing lines (e.g., line charts)\ngeom_smooth for drawing smoothed lines (e.g., for simple trends or approximations)\ngeom_bar for drawing bars (e.g., bar charts)\ngeom_histogram for drawing binned values (e.g., histogram)\ngeom_polygon for drawing arbitrary shapes\ngeom_map for drawing polygons in the shape of a map by accessing the data to use using the map_data() function\n\nFor the complete list, please refer here.\n\nPlotting Bar Charts\nThe code chunk below plots a bar chart using geom_bar().\n\nggplot(exam_data, \n       aes(x=RACE)) +\n  geom_bar()\n\n\n\n\n\n\nPlotting Geometric Objects\nIn a dot plot, the width of a dot corresponds to the bin width (or maximum width, depending on the binning algorithm), and dots are stacked, with each dot representing one observation.\nIn the code chunk below, geom_dotplot() of ggplot2 is used to plot a dot plot.\n\nggplot(exam_data, \n       aes(x=MATHS)) + \n  geom_dotplot(dotsize=0.5)\n\nBin width defaults to 1/30 of the range of the data. Pick better value with\n`binwidth`.\n\n\n\n\n\n\n\n\n\n\n\nBe warned\n\n\n\nThe y-scale is rather misleading.\n\n\n\n\n\n\n\n\nNote\n\n\n\nThe code chunk below performs the following two steps:\n\nscale_y_continuous() is used to turn off the y-axis\nbinwidth argument is used to change the binwidth to 2.5.\n\n\n\n\nggplot(exam_data,\n       aes(x=MATHS)) + \n  geom_dotplot(binwidth=2.5, \n               dotsize=0.5) + \n  scale_y_continuous(NULL, \n                     breaks=NULL)\n\n\n\n\n\n\nPlotting Histograms\nIn the code chunk below, geom_histogram() is used to create a simple histogram by using values in MATHS field of exam_data.\n\nggplot(exam_data, \n       aes(x=MATHS)) + \n  geom_histogram()\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nNote that the default bin is 30.\n\n\n\n\nModifying Plots by Changing geom()\nIn the code chunk below,\n\nbins argument is used to change the number of bins to 20,\nfill argument is used to shade the histogram with light blue colour, and\ncolor argument is used to change the outline colour of the bars in black\n\n\nggplot(exam_data,\n       aes(x=MATHS)) + \n  geom_histogram(bins=20,\n                 color=\"black\",\n                 fill=\"light blue\")\n\n\n\n\n\n\nModifying Plots by Changing aes()\nThe code chunk below changes the fill of the histogram by using sub-group of aesthetic().\n\nggplot(exam_data,\n       aes(x=MATHS, \n           fill=GENDER)) + \n  geom_histogram(bins=20, \n                 color=\"grey30\")\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nThis approach can be used to colour, fill and alpha of the geometric.\n\n\n\n\nPlotting Kernel Density Lines\ngeom-density() computes and plots kernel density estimate, which is a smoothed version of the histogram. It is a useful alternative to the histogram for continuous data that comes from an underlying smooth distribution.\nThe code below plots the distribution of Math scores in a kernel density estimate plot.\n\nggplot(exam_data, \n       aes(x=MATHS)) + \n  geom_density()\n\n\n\n\nThe code chunk below plots two kernel density lines by using color or fill arguments of aes().\n\nggplot(exam_data, \n       aes(x=MATHS,\n           color=GENDER)) + \n  geom_density()\n\n\n\n\n\n\nPlotting Boxplots\ngeom_boxplot() displays continuous value lists. It visualises five summary statistics (namely median, two hinges and two whiskers) and all individual outlying points.\nThe code chunk below plots boxplots using geom_boxplot().\n\nggplot(exam_data,\n       aes(y=MATHS,\n           x=GENDER)) + \n  geom_boxplot()\n\n\n\n\nNotches are used in boxplots to visually assess whether the medians of distributions differ. If the notches do not overlap, this is evidence that the medians are different. The code chunk below plots the distribution of Maths scores by gender in notched plots instead of boxplots.\n\nggplot(exam_data,\n       aes(y=MATHS,\n           x=GENDER)) + \n  geom_boxplot(notch=TRUE)\n\n\n\n\n\n\nPlotting Violin Plots\ngeom_violin() is designed for creating violin plots. Violin plots are used to compare multiple data distributions. With ordinary density curves, it is difficult to compare more than just a few distributions as the lines visually interfere with each other. With a violin plot, it is easier to compare several distributions as they are placed side by side.\nThe code below plots the distribution of Math scores by gender in a violin plot.\n\nggplot(exam_data,\n       aes(y=MATHS,\n           x=GENDER)) + \n  geom_violin()\n\n\n\n\n\n\nPlotting Scatterplots\ngeom_point() is especially useful for creating scatterplots. The code chunk below plots a scatterplot showing the Math and English grades of pupils using geom_point().\n\nggplot(exam_data,\n       aes(x=MATHS,\n           y=ENGLISH)) +\n  geom_point()\n\n\n\n\n\n\nCombining geom Objects\nThe code chunk below plots the data points on the boxplot by using both geom_boxplot() and geom_point().\n\nggplot(exam_data,\n       aes(y=MATHS,\n           x=GENDER)) + \n  geom_boxplot() + \n  geom_point(position=\"jitter\", \n             size=0.5)"
  },
  {
    "objectID": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#adding-summary-statistics-into-plots",
    "href": "Hands_On_Exercise/Hands_On_Ex01/Hands_On_Ex01.html#adding-summary-statistics-into-plots",
    "title": "Hands-on-Exercise-1",
    "section": "Adding Summary Statistics into Plots",
    "text": "Adding Summary Statistics into Plots\nThe Statistic functions statistically transform data, usually as some form of summary. For example:\n\nFrequency of values of a variable (bar graph)\n\na mean\na confidence limit\n\nThere are two ways to use these functions:\n\nadd a stat_() function and override the default geom, or\nadd a geom_() function and override the default stat.\n\n\n\nWorking with stat() - stat_summary() method\nThe code chunk below adds mean values by using stat_summary() function and overrides the default geom.\n\nggplot(exam_data,\n       aes(y=MATHS, x=GENDER)) +\n  geom_boxplot() + \n  stat_summary(geom=\"point\", \n               fun.y=\"mean\", \n               color=\"red\", \n               size=4)\n\nWarning: The `fun.y` argument of `stat_summary()` is deprecated as of ggplot2 3.3.0.\nℹ Please use the `fun` argument instead.\n\n\n\n\n\n\n\nWorking with stat() - geom() method\nThe code chunk below adds mean values by using geom() function and overrides the default stat.\n\nggplot(exam_data,\n       aes(y=MATHS, \n           x=GENDER)) + \n  geom_boxplot() + \n  geom_point(stat=\"summary\", \n             fun.y=\"mean\", \n             color=\"red\", \n             size=4)\n\nWarning in geom_point(stat = \"summary\", fun.y = \"mean\", color = \"red\", size =\n4): Ignoring unknown parameters: `fun.y`\n\n\nNo summary function supplied, defaulting to `mean_se()`\n\n\n\n\n\n\n\nAdding a Best Fit Curve on Scatterplots\nThe interpretability of the scatterplot of English against Math grades of pupils can be improved by adding a best fit curve. In the code chunk below, geom_smooth() is used to plot a best fit curve on the scatterplot.\n\nggplot(exam_data, \n       aes(x=MATHS,\n           y=ENGLISH)) + \n  geom_point() + \n  geom_smooth(size=0.5)\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nThe default method used is loess."
  }
]